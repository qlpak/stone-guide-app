{"level":"info","message":"GET /api/stones/67bb411df11ccdc6ee00184e","timestamp":"2025-02-23T15:39:09.825Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T15:39:09.846Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T15:39:09.862Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T15:39:09.872Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb411df11ccdc6ee001853","color":"White","createdAt":"2025-02-23T15:39:09.877Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T15:39:09.877Z","usage":["bathroom"]},"timestamp":"2025-02-23T15:39:09.879Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T15:39:09.883Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T15:39:09.888Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb411df11ccdc6ee001856","timestamp":"2025-02-23T15:39:09.900Z"}
{"id":"67bb411df11ccdc6ee001856","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T15:39:09.908Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T15:39:10.423Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb411e9d942da3e980f319","timestamp":"2025-02-23T15:39:10.628Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T15:39:10.637Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb411e9d942da3e980f319","timestamp":"2025-02-23T15:39:10.683Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T15:39:10.691Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T15:39:10.694Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T15:39:11.191Z"}
{"level":"info","message":"GET /api/stones/67bb49badc91e38f71309e2e","timestamp":"2025-02-23T16:15:54.200Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:15:54.223Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:15:54.244Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:15:54.256Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb49badc91e38f71309e33","color":"White","createdAt":"2025-02-23T16:15:54.260Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:15:54.260Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:15:54.262Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:15:54.267Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:15:54.272Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb49badc91e38f71309e36","timestamp":"2025-02-23T16:15:54.289Z"}
{"id":"67bb49badc91e38f71309e36","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:15:54.297Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:15:54.906Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb49ba7d9e6b683c79d3f3","timestamp":"2025-02-23T16:15:55.034Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:15:55.053Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb49ba7d9e6b683c79d3f3","timestamp":"2025-02-23T16:15:55.145Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:15:55.175Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:15:55.178Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:15:55.754Z"}
{"level":"info","message":"GET /api/stones/67bb4b0577242f9f07eabc86","timestamp":"2025-02-23T16:21:25.277Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:21:25.309Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:21:25.380Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:21:25.399Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb4b0577242f9f07eabc8b","color":"White","createdAt":"2025-02-23T16:21:25.405Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:21:25.405Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:21:25.407Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:21:25.413Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:21:25.453Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb4b0577242f9f07eabc8e","timestamp":"2025-02-23T16:21:25.484Z"}
{"id":"67bb4b0577242f9f07eabc8e","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:21:25.538Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:21:26.193Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb4b06fc0fb82dffe0b151","timestamp":"2025-02-23T16:21:26.400Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:21:26.409Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb4b06fc0fb82dffe0b151","timestamp":"2025-02-23T16:21:26.455Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:21:26.461Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:21:26.464Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:21:26.948Z"}
{"level":"info","message":"GET /api/stones/67bb50e864ce5d6e44cfffbf","timestamp":"2025-02-23T16:46:32.088Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:46:32.110Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:46:32.129Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:46:32.139Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb50e864ce5d6e44cfffc4","color":"White","createdAt":"2025-02-23T16:46:32.144Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:46:32.144Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:46:32.146Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:46:32.150Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:46:32.155Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb50e864ce5d6e44cfffc7","timestamp":"2025-02-23T16:46:32.169Z"}
{"id":"67bb50e864ce5d6e44cfffc7","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:46:32.176Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:46:32.764Z"}
{"level":"info","message":"GET /api/stones/67bb5105b2f0ea85e0c7f435","timestamp":"2025-02-23T16:47:01.471Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:47:01.515Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:47:01.620Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:47:01.648Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb5105b2f0ea85e0c7f43a","color":"White","createdAt":"2025-02-23T16:47:01.654Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:47:01.654Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:47:01.658Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:47:01.709Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:47:01.720Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb5105b2f0ea85e0c7f43d","timestamp":"2025-02-23T16:47:01.747Z"}
{"id":"67bb5105b2f0ea85e0c7f43d","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:47:01.755Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:47:02.273Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:47:02.897Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb5106b3ab217e51ef563c","timestamp":"2025-02-23T16:47:03.128Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:47:03.140Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb5106b3ab217e51ef563c","timestamp":"2025-02-23T16:47:03.148Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:47:03.154Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:47:03.157Z"}
{"level":"info","message":"GET /api/stones/67bb516cd61465b8e7744ab9","timestamp":"2025-02-23T16:48:44.440Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:48:44.464Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:48:44.480Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:48:44.492Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb516cd61465b8e7744abe","color":"White","createdAt":"2025-02-23T16:48:44.496Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:48:44.496Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:48:44.498Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:48:44.503Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:48:44.507Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb516cd61465b8e7744ac1","timestamp":"2025-02-23T16:48:44.520Z"}
{"id":"67bb516cd61465b8e7744ac1","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:48:44.528Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:48:45.053Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb516d50a767437a4e487f","timestamp":"2025-02-23T16:48:45.266Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:48:45.277Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb516d50a767437a4e487f","timestamp":"2025-02-23T16:48:45.285Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:48:45.291Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:48:45.294Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:48:45.796Z"}
{"level":"info","message":"GET /api/stones/67bb5187233feb544f670382","timestamp":"2025-02-23T16:49:11.682Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:49:11.705Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:49:11.722Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:49:11.733Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb5187233feb544f670387","color":"White","createdAt":"2025-02-23T16:49:11.738Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:49:11.738Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:49:11.739Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:49:11.744Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:49:11.748Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb5187233feb544f67038a","timestamp":"2025-02-23T16:49:11.761Z"}
{"id":"67bb5187233feb544f67038a","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:49:11.769Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:49:12.340Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb518886beabc3617d2352","timestamp":"2025-02-23T16:49:12.591Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:49:12.609Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb518886beabc3617d2352","timestamp":"2025-02-23T16:49:12.616Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:49:12.624Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:49:12.627Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:49:13.546Z"}
{"level":"info","message":"GET /api/stones/67bb51ece180318d9b7e12bc","timestamp":"2025-02-23T16:50:52.453Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:50:52.475Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:50:52.491Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:50:52.502Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb51ece180318d9b7e12c1","color":"White","createdAt":"2025-02-23T16:50:52.507Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:50:52.507Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:50:52.508Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:50:52.514Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:50:52.522Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb51ece180318d9b7e12c4","timestamp":"2025-02-23T16:50:52.535Z"}
{"id":"67bb51ece180318d9b7e12c4","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:50:52.543Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:50:53.090Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:50:53.683Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb51edd00a0f0202181ad5","timestamp":"2025-02-23T16:50:53.864Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:50:53.873Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb51edd00a0f0202181ad5","timestamp":"2025-02-23T16:50:53.882Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:50:53.887Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:50:53.889Z"}
{"level":"info","message":"GET /api/stones/67bb5224ac7bf9c004faef57","timestamp":"2025-02-23T16:51:48.981Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:51:49.004Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:51:49.021Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:51:49.033Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb5225ac7bf9c004faef5c","color":"White","createdAt":"2025-02-23T16:51:49.037Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:51:49.037Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:51:49.038Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:51:49.043Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:51:49.048Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb5225ac7bf9c004faef5f","timestamp":"2025-02-23T16:51:49.061Z"}
{"id":"67bb5225ac7bf9c004faef5f","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:51:49.068Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:51:49.602Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb52250faf51fd5f39a0f6","timestamp":"2025-02-23T16:51:49.733Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:51:49.741Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb52250faf51fd5f39a0f6","timestamp":"2025-02-23T16:51:49.748Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:51:49.753Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:51:49.756Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:51:50.262Z"}
{"level":"info","message":"GET /api/stones/67bb53c81fb579dc4cd732cc","timestamp":"2025-02-23T16:58:48.657Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:58:48.677Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:58:48.694Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:58:48.704Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb53c81fb579dc4cd732d1","color":"White","createdAt":"2025-02-23T16:58:48.709Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:58:48.709Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:58:48.710Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:58:48.714Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:58:48.720Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb53c81fb579dc4cd732d4","timestamp":"2025-02-23T16:58:48.732Z"}
{"id":"67bb53c81fb579dc4cd732d4","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:58:48.740Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:58:49.325Z"}
{"level":"info","message":"GET /api/stones/67bb53f8e5df3fb394e1d898","timestamp":"2025-02-23T16:59:36.229Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T16:59:36.250Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T16:59:36.269Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T16:59:36.281Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb53f8e5df3fb394e1d89d","color":"White","createdAt":"2025-02-23T16:59:36.285Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T16:59:36.285Z","usage":["bathroom"]},"timestamp":"2025-02-23T16:59:36.287Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T16:59:36.292Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T16:59:36.296Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb53f8e5df3fb394e1d8a0","timestamp":"2025-02-23T16:59:36.309Z"}
{"id":"67bb53f8e5df3fb394e1d8a0","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T16:59:36.317Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T16:59:36.807Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:59:37.432Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T16:59:37.625Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb53f9ab57596bf986feca","timestamp":"2025-02-23T16:59:37.627Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T16:59:37.632Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:59:37.641Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T16:59:37.648Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb53f9ab57596bf986feca","timestamp":"2025-02-23T16:59:37.649Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T16:59:37.656Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T16:59:37.659Z"}
{"level":"info","message":"GET /api/stones/67bb616e6a3c2139e31bde00","timestamp":"2025-02-23T17:57:03.040Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T17:57:03.061Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T17:57:03.078Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T17:57:03.089Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb616f6a3c2139e31bde05","color":"White","createdAt":"2025-02-23T17:57:03.093Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T17:57:03.093Z","usage":["bathroom"]},"timestamp":"2025-02-23T17:57:03.095Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T17:57:03.099Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T17:57:03.104Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb616f6a3c2139e31bde08","timestamp":"2025-02-23T17:57:03.117Z"}
{"id":"67bb616f6a3c2139e31bde08","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T17:57:03.124Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T17:57:03.697Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T17:57:03.888Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb616f15c6c68c1a912053","timestamp":"2025-02-23T17:57:03.890Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T17:57:03.894Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T17:57:03.899Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T17:57:03.909Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb616f15c6c68c1a912053","timestamp":"2025-02-23T17:57:03.911Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T17:57:03.916Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T17:57:03.920Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T17:57:04.446Z"}
{"level":"info","message":"GET /api/stones/67bb6381aaa09efa2f553c76","timestamp":"2025-02-23T18:05:53.347Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:05:53.367Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:05:53.384Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:05:53.394Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6381aaa09efa2f553c7b","color":"White","createdAt":"2025-02-23T18:05:53.399Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:05:53.399Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:05:53.401Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:05:53.405Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:05:53.410Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6381aaa09efa2f553c7e","timestamp":"2025-02-23T18:05:53.423Z"}
{"id":"67bb6381aaa09efa2f553c7e","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:05:53.429Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:05:53.984Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:05:54.124Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb638117b5388308520060","timestamp":"2025-02-23T18:05:54.125Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:05:54.130Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:05:54.135Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:05:54.142Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb638117b5388308520060","timestamp":"2025-02-23T18:05:54.144Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:05:54.148Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:05:54.151Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:05:54.651Z"}
{"level":"info","message":"GET /api/stones/67bb64633073bc985862b4b1","timestamp":"2025-02-23T18:09:39.344Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:09:39.374Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:09:39.397Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:09:39.408Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb64633073bc985862b4b6","color":"White","createdAt":"2025-02-23T18:09:39.414Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:09:39.414Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:09:39.415Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:09:39.420Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:09:39.425Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb64633073bc985862b4b9","timestamp":"2025-02-23T18:09:39.438Z"}
{"id":"67bb64633073bc985862b4b9","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:09:39.447Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:09:40.129Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:09:40.268Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6464d250ebf9ea44df36","timestamp":"2025-02-23T18:09:40.269Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:09:40.272Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:09:40.279Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:09:40.284Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6464d250ebf9ea44df36","timestamp":"2025-02-23T18:09:40.285Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:09:40.289Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:09:40.292Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:09:40.799Z"}
{"level":"info","message":"GET /api/stones/67bb66050466b5c889b2aba2","timestamp":"2025-02-23T18:16:37.406Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:16:37.427Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:16:37.446Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:16:37.457Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb66050466b5c889b2aba7","color":"White","createdAt":"2025-02-23T18:16:37.462Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:16:37.462Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:16:37.464Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:16:37.469Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:16:37.475Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb66050466b5c889b2abaa","timestamp":"2025-02-23T18:16:37.488Z"}
{"id":"67bb66050466b5c889b2abaa","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:16:37.495Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:16:38.043Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:16:38.274Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6606b4c9e1cf15303f21","timestamp":"2025-02-23T18:16:38.275Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:16:38.286Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:16:38.297Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:16:38.304Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6606b4c9e1cf15303f21","timestamp":"2025-02-23T18:16:38.306Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:16:38.313Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:16:38.329Z"}
{"level":"info","message":"GET /api/stones/67bb66226ac4f48ce413f453","timestamp":"2025-02-23T18:17:06.531Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:17:06.552Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:17:06.568Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:17:06.579Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb66226ac4f48ce413f458","color":"White","createdAt":"2025-02-23T18:17:06.584Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:17:06.584Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:17:06.586Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:17:06.590Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:17:06.595Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb66226ac4f48ce413f45b","timestamp":"2025-02-23T18:17:06.619Z"}
{"id":"67bb66226ac4f48ce413f45b","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:17:06.627Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:17:07.154Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:17:07.267Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb662376164e0f0806217e","timestamp":"2025-02-23T18:17:07.268Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:17:07.271Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:17:07.276Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:17:07.281Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb662376164e0f0806217e","timestamp":"2025-02-23T18:17:07.283Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:17:07.287Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:17:07.290Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:17:07.843Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:17:07.853Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:17:07.863Z"}
{"level":"info","message":"GET /api/pricing","timestamp":"2025-02-23T18:17:07.868Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:17:07.877Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:17:07.885Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:17:07.888Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:18:12.017Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:18:12.035Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:18:12.062Z"}
{"level":"info","message":"GET /api/pricing","timestamp":"2025-02-23T18:18:12.067Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:18:12.077Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:18:12.091Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:18:12.093Z"}
{"level":"info","message":"GET /api/stones/67bb6664b9487c0b1abada54","timestamp":"2025-02-23T18:18:12.627Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:18:12.639Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:18:12.648Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:18:12.654Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6664b9487c0b1abada59","color":"White","createdAt":"2025-02-23T18:18:12.658Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:18:12.658Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:18:12.660Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:18:12.664Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:18:12.669Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6664b9487c0b1abada5c","timestamp":"2025-02-23T18:18:12.681Z"}
{"id":"67bb6664b9487c0b1abada5c","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:18:12.688Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:18:13.214Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:18:13.331Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb66656dae655dbd00e77a","timestamp":"2025-02-23T18:18:13.332Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:18:13.335Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:18:13.341Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:18:13.347Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb66656dae655dbd00e77a","timestamp":"2025-02-23T18:18:13.348Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:18:13.354Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:18:13.356Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:21:27.336Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:21:27.356Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:21:27.365Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:21:27.391Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:21:27.402Z"}
{"kind":"ObjectId","level":"error","message":"Error in price calculation: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"\n    at SchemaObjectId.Object.<anonymous>.SchemaObjectId.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4907:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2325:10)\n    at model.Query._findOne (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2648:8)\n    at model.Query.exec (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4456:80)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:19)","stringValue":"\"fakeId\"","timestamp":"2025-02-23T18:21:27.412Z","value":"fakeId","valueType":"string"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:21:27.419Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:21:27.422Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:21:28.018Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:21:28.272Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6727ee95993ac1fea4cf","timestamp":"2025-02-23T18:21:28.274Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:21:28.279Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:21:28.287Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:21:28.295Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6727ee95993ac1fea4cf","timestamp":"2025-02-23T18:21:28.296Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:21:28.303Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:21:28.306Z"}
{"level":"info","message":"GET /api/stones/67bb67284474ad2e7cdf74e3","timestamp":"2025-02-23T18:21:28.886Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:21:28.901Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:21:28.910Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:21:28.918Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb67284474ad2e7cdf74e8","color":"White","createdAt":"2025-02-23T18:21:28.923Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:21:28.923Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:21:28.924Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:21:28.929Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:21:28.934Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb67284474ad2e7cdf74eb","timestamp":"2025-02-23T18:21:28.946Z"}
{"id":"67bb67284474ad2e7cdf74eb","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:21:28.954Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:23:34.455Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:23:34.468Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:23:34.478Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:23:34.500Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:23:34.511Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:23:34.518Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:23:34.529Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:23:34.531Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:23:35.080Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:23:35.088Z"}
{"error":"Internal Server Error","level":"info","message":"Response body:","timestamp":"2025-02-23T18:23:35.095Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:23:35.099Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:23:35.101Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:23:35.109Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:23:35.112Z"}
{"level":"info","message":"GET /api/stones/67bb67a7590a49ce3bb30d1f","timestamp":"2025-02-23T18:23:35.662Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:23:35.676Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:23:35.686Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:23:35.692Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb67a7590a49ce3bb30d24","color":"White","createdAt":"2025-02-23T18:23:35.696Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:23:35.696Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:23:35.698Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:23:35.702Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:23:35.707Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb67a7590a49ce3bb30d27","timestamp":"2025-02-23T18:23:35.718Z"}
{"id":"67bb67a7590a49ce3bb30d27","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:23:35.725Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:24:45.997Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:24:46.015Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:24:46.024Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:24:46.047Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:24:46.058Z"}
{"kind":"ObjectId","level":"error","message":"Error in price calculation: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"\n    at SchemaObjectId.Object.<anonymous>.SchemaObjectId.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4907:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2325:10)\n    at model.Query._findOne (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2648:8)\n    at model.Query.exec (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4456:80)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:19)","stringValue":"\"fakeId\"","timestamp":"2025-02-23T18:24:46.066Z","value":"fakeId","valueType":"string"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:24:46.072Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:24:46.074Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:24:46.615Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:24:46.744Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb67ee91f86400bd584965","timestamp":"2025-02-23T18:24:46.746Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:24:46.749Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:24:46.753Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:24:46.760Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb67ee91f86400bd584965","timestamp":"2025-02-23T18:24:46.761Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:24:46.766Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:24:46.769Z"}
{"level":"info","message":"GET /api/stones/67bb67ef5b629301d2aa8bcb","timestamp":"2025-02-23T18:24:47.321Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:24:47.335Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:24:47.344Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:24:47.351Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb67ef5b629301d2aa8bd0","color":"White","createdAt":"2025-02-23T18:24:47.355Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:24:47.355Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:24:47.356Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:24:47.361Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:24:47.365Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb67ef5b629301d2aa8bd3","timestamp":"2025-02-23T18:24:47.377Z"}
{"id":"67bb67ef5b629301d2aa8bd3","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:24:47.384Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:26:52.082Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:26:52.098Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:26:52.107Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:26:52.134Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:26:52.144Z"}
{"kind":"ObjectId","level":"error","message":"Error in price calculation: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"\n    at SchemaObjectId.Object.<anonymous>.SchemaObjectId.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4907:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2325:10)\n    at model.Query._findOne (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2648:8)\n    at model.Query.exec (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4456:80)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:19)","stringValue":"\"fakeId\"","timestamp":"2025-02-23T18:26:52.153Z","value":"fakeId","valueType":"string"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:26:52.159Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:26:52.162Z"}
{"level":"info","message":"GET /api/stones/67bb686ca63273976858eb59","timestamp":"2025-02-23T18:26:52.902Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:26:52.914Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:26:52.923Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:26:52.931Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb686ca63273976858eb5e","color":"White","createdAt":"2025-02-23T18:26:52.935Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:26:52.935Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:26:52.936Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:26:52.941Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:26:52.946Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb686ca63273976858eb61","timestamp":"2025-02-23T18:26:52.959Z"}
{"id":"67bb686ca63273976858eb61","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:26:52.967Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:27:36.605Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:27:36.620Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:27:36.630Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:27:36.652Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:36.663Z"}
{"kind":"ObjectId","level":"error","message":"Error in price calculation: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"fakeId\" (type string) at path \"_id\" for model \"Stone\"\n    at SchemaObjectId.Object.<anonymous>.SchemaObjectId.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4907:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2325:10)\n    at model.Query._findOne (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2648:8)\n    at model.Query.exec (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4456:80)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:19)","stringValue":"\"fakeId\"","timestamp":"2025-02-23T18:27:36.673Z","value":"fakeId","valueType":"string"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:27:36.679Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:27:36.682Z"}
{"level":"info","message":"GET /api/stones/67bb689902d35f43f9e19ba4","timestamp":"2025-02-23T18:27:37.223Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:27:37.236Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:27:37.244Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:27:37.251Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb689902d35f43f9e19ba9","color":"White","createdAt":"2025-02-23T18:27:37.255Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:27:37.255Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:27:37.257Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:27:37.263Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:27:37.269Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb689902d35f43f9e19bac","timestamp":"2025-02-23T18:27:37.284Z"}
{"id":"67bb689902d35f43f9e19bac","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:27:37.291Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:37.938Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:27:38.100Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb689973b9bf2995c817ae","timestamp":"2025-02-23T18:27:38.101Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:27:38.107Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.112Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:27:38.119Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb689973b9bf2995c817ae","timestamp":"2025-02-23T18:27:38.121Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.128Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:27:38.130Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.136Z"}
{"kind":"ObjectId","level":"error","message":"Error in price calculation: Cast to ObjectId failed for value \"invalidId\" (type string) at path \"_id\" for model \"Stone\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"invalidId\" (type string) at path \"_id\" for model \"Stone\"\n    at SchemaObjectId.Object.<anonymous>.SchemaObjectId.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.applySetters (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaObjectId.Object.<anonymous>.SchemaType.castForQuery (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/cast.js:390:32)\n    at model.Query.Object.<anonymous>.Query.cast (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4907:12)\n    at model.Query.Object.<anonymous>.Query._castConditions (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2325:10)\n    at model.Query._findOne (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:2648:8)\n    at model.Query.exec (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/mongoose/lib/query.js:4456:80)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:19)","stringValue":"\"invalidId\"","timestamp":"2025-02-23T18:27:38.141Z","value":"invalidId","valueType":"string"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.147Z"}
{"level":"warn","message":"Stone not found with ID: 67bb689a73b9bf2995c817b2","timestamp":"2025-02-23T18:27:38.150Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.155Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:27:38.158Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.163Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:27:38.169Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb689973b9bf2995c817ae","timestamp":"2025-02-23T18:27:38.170Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.174Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:27:38.179Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb689973b9bf2995c817ae","timestamp":"2025-02-23T18:27:38.180Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.185Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:27:38.189Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb689973b9bf2995c817ae","timestamp":"2025-02-23T18:27:38.190Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:27:38.195Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:168:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:69:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:27:38.198Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.436Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.445Z"}
{"error":"Internal Server Error","level":"info","message":"Response body:","timestamp":"2025-02-23T18:31:47.454Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.461Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.464Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.472Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:31:47.474Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.481Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.483Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.491Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.494Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.505Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.508Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.516Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.522Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.525Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.533Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.536Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:47.544Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:47.547Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:31:48.077Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:31:48.087Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:31:48.097Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:31:48.118Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:31:48.124Z"}
{"level":"error","message":"Error in price calculation: mongoose is not defined","stack":"ReferenceError: mongoose is not defined\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:73:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:31:48.132Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:31:48.140Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:31:48.142Z"}
{"level":"info","message":"GET /api/stones/67bb69948d2ee30c333bac09","timestamp":"2025-02-23T18:31:48.679Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:31:48.692Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:31:48.702Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:31:48.708Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb69948d2ee30c333bac0e","color":"White","createdAt":"2025-02-23T18:31:48.713Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:31:48.713Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:31:48.714Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:31:48.718Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:31:48.723Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb69948d2ee30c333bac11","timestamp":"2025-02-23T18:31:48.735Z"}
{"id":"67bb69948d2ee30c333bac11","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:31:48.742Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.151Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:32:36.407Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb69c4a0ab1d4dd65a8afc","timestamp":"2025-02-23T18:32:36.410Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:32:36.418Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.425Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:32:36.435Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb69c4a0ab1d4dd65a8afc","timestamp":"2025-02-23T18:32:36.437Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.447Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:32:36.452Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.459Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.466Z"}
{"level":"warn","message":"Stone not found with ID: 67bb69c4a0ab1d4dd65a8b00","timestamp":"2025-02-23T18:32:36.471Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.476Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:32:36.481Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.486Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.492Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:32:36.497Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb69c4a0ab1d4dd65a8afc","timestamp":"2025-02-23T18:32:36.498Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.504Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:32:36.509Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb69c4a0ab1d4dd65a8afc","timestamp":"2025-02-23T18:32:36.510Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:36.515Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:32:36.521Z"}
{"level":"info","message":"GET /api/stones/67bb69c56900795c68c5395f","timestamp":"2025-02-23T18:32:37.114Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:32:37.127Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:32:37.143Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:32:37.150Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb69c56900795c68c53964","color":"White","createdAt":"2025-02-23T18:32:37.154Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:32:37.154Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:32:37.155Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:32:37.159Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:32:37.165Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb69c56900795c68c53967","timestamp":"2025-02-23T18:32:37.177Z"}
{"id":"67bb69c56900795c68c53967","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:32:37.183Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:32:37.712Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:32:37.722Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:32:37.731Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:32:37.739Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:32:37.745Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:32:37.752Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:32:37.754Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.341Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:44:56.485Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ca8a12aa0c2a8b0af7f","timestamp":"2025-02-23T18:44:56.487Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:44:56.492Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.499Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:44:56.502Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.510Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.518Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6ca8a12aa0c2a8b0af82","timestamp":"2025-02-23T18:44:56.523Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.529Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:44:56.534Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.539Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.546Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:44:56.551Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ca8a12aa0c2a8b0af7f","timestamp":"2025-02-23T18:44:56.552Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.557Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:44:56.562Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ca8a12aa0c2a8b0af7f","timestamp":"2025-02-23T18:44:56.563Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:56.568Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:44:56.577Z"}
{"level":"info","message":"GET /api/stones/67bb6ca90bfc765345f247d6","timestamp":"2025-02-23T18:44:57.196Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:44:57.212Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:44:57.227Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:44:57.233Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6ca90bfc765345f247db","color":"White","createdAt":"2025-02-23T18:44:57.237Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"type":"marble","updatedAt":"2025-02-23T18:44:57.237Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:44:57.238Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:44:57.243Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:44:57.247Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6ca90bfc765345f247de","timestamp":"2025-02-23T18:44:57.260Z"}
{"id":"67bb6ca90bfc765345f247de","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:44:57.267Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:44:57.781Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:44:57.791Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:44:57.799Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:44:57.807Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:44:57.815Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:44:57.821Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:44:57.824Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.604Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:47:13.720Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d31f5e13a9c1c2462e7","timestamp":"2025-02-23T18:47:13.721Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:47:13.728Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.733Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:47:13.736Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.744Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.751Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6d31f5e13a9c1c2462ea","timestamp":"2025-02-23T18:47:13.755Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.760Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:47:13.765Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.770Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.776Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:47:13.781Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d31f5e13a9c1c2462e7","timestamp":"2025-02-23T18:47:13.782Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.787Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:47:13.792Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d31f5e13a9c1c2462e7","timestamp":"2025-02-23T18:47:13.793Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:13.798Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:47:13.807Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:47:14.464Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:47:14.483Z"}
{"level":"info","message":"GET /api/stones/67bb6d32178bb5db296fb20f","timestamp":"2025-02-23T18:47:14.489Z"}
{"level":"info","message":"GET /api/stones/67bb6d32178bb5db296fb214","timestamp":"2025-02-23T18:47:14.498Z"}
{"id":"67bb6d32178bb5db296fb214","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:47:14.502Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:47:14.508Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6d32178bb5db296fb216","color":"White","createdAt":"2025-02-23T18:47:14.512Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:47:14.512Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:47:14.513Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:47:14.518Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:47:14.520Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:47:14.525Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:47:14.530Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:47:14.534Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:47:14.538Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6d32178bb5db296fb21a","timestamp":"2025-02-23T18:47:14.547Z"}
{"id":"67bb6d32178bb5db296fb21a","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:47:14.554Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6d32178bb5db296fb220","timestamp":"2025-02-23T18:47:14.558Z"}
{"id":"67bb6d32178bb5db296fb220","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:47:14.563Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:47:14.567Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:47:14.570Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:47:15.061Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:47:15.073Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:47:15.082Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:47:15.091Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:47:15.097Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:47:15.104Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:47:15.106Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.179Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:48:31.306Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d7fec755c6eb61c1856","timestamp":"2025-02-23T18:48:31.307Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:48:31.312Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.318Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:48:31.321Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.328Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.335Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6d7fec755c6eb61c1859","timestamp":"2025-02-23T18:48:31.339Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.344Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:48:31.349Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.354Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.361Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:48:31.365Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d7fec755c6eb61c1856","timestamp":"2025-02-23T18:48:31.367Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.372Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:48:31.378Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6d7fec755c6eb61c1856","timestamp":"2025-02-23T18:48:31.379Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:31.384Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:48:31.393Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:48:31.939Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:48:31.957Z"}
{"level":"info","message":"GET /api/stones/67bb6d7fcaf14f48e31d5ca3","timestamp":"2025-02-23T18:48:31.963Z"}
{"level":"info","message":"GET /api/stones/67bb6d7fcaf14f48e31d5ca8","timestamp":"2025-02-23T18:48:31.971Z"}
{"id":"67bb6d7fcaf14f48e31d5ca8","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:48:31.976Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:48:31.982Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6d7fcaf14f48e31d5caa","color":"White","createdAt":"2025-02-23T18:48:31.987Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:48:31.987Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:48:31.988Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:48:31.992Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:48:31.995Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:48:32.000Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:48:32.005Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:48:32.010Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:48:32.014Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6d80caf14f48e31d5cae","timestamp":"2025-02-23T18:48:32.023Z"}
{"id":"67bb6d80caf14f48e31d5cae","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:48:32.029Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6d80caf14f48e31d5cb4","timestamp":"2025-02-23T18:48:32.034Z"}
{"id":"67bb6d80caf14f48e31d5cb4","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:48:32.038Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:48:32.042Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:48:32.045Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:48:32.533Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:48:32.543Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:48:32.551Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:48:32.559Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:48:32.565Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:48:32.572Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:48:32.575Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.350Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:49:17.480Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dadbca26c600f370186","timestamp":"2025-02-23T18:49:17.482Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:49:17.489Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.494Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:49:17.497Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.504Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.511Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6dadbca26c600f370189","timestamp":"2025-02-23T18:49:17.516Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.521Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:49:17.525Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.530Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.537Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:17.542Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dadbca26c600f370186","timestamp":"2025-02-23T18:49:17.543Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.548Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:17.553Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dadbca26c600f370186","timestamp":"2025-02-23T18:49:17.554Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:17.559Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:49:17.568Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:49:18.128Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:49:18.145Z"}
{"level":"info","message":"GET /api/stones/67bb6daee8b742f2948ecfe8","timestamp":"2025-02-23T18:49:18.151Z"}
{"level":"info","message":"GET /api/stones/67bb6daee8b742f2948ecfed","timestamp":"2025-02-23T18:49:18.159Z"}
{"id":"67bb6daee8b742f2948ecfed","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:49:18.163Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:18.169Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6daee8b742f2948ecfef","color":"White","createdAt":"2025-02-23T18:49:18.173Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:49:18.173Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:49:18.174Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:18.179Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:49:18.182Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:49:18.187Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:49:18.191Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:49:18.196Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:49:18.200Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6daee8b742f2948ecff3","timestamp":"2025-02-23T18:49:18.209Z"}
{"id":"67bb6daee8b742f2948ecff3","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:49:18.217Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6daee8b742f2948ecff9","timestamp":"2025-02-23T18:49:18.221Z"}
{"id":"67bb6daee8b742f2948ecff9","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:49:18.225Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:49:18.229Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:49:18.232Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:49:18.716Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:49:18.727Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:49:18.735Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:49:18.743Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:18.750Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:18.756Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:49:18.758Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.639Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:49:42.810Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dc6bd5f1524306ad141","timestamp":"2025-02-23T18:49:42.812Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:49:42.821Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.827Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:49:42.830Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.839Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.846Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6dc6bd5f1524306ad144","timestamp":"2025-02-23T18:49:42.851Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.857Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:49:42.861Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.867Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.873Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:42.879Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dc6bd5f1524306ad141","timestamp":"2025-02-23T18:49:42.880Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.884Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:42.891Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dc6bd5f1524306ad141","timestamp":"2025-02-23T18:49:42.892Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:42.898Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:49:42.907Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:49:43.456Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:49:43.473Z"}
{"level":"info","message":"GET /api/stones/67bb6dc7b82f1c8242988ff4","timestamp":"2025-02-23T18:49:43.479Z"}
{"level":"info","message":"GET /api/stones/67bb6dc7b82f1c8242988ff9","timestamp":"2025-02-23T18:49:43.487Z"}
{"id":"67bb6dc7b82f1c8242988ff9","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:49:43.492Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:43.498Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6dc7b82f1c8242988ffb","color":"White","createdAt":"2025-02-23T18:49:43.502Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:49:43.502Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:49:43.504Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:43.508Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:49:43.511Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:49:43.516Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:49:43.521Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:49:43.525Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:49:43.529Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6dc7b82f1c8242988fff","timestamp":"2025-02-23T18:49:43.539Z"}
{"id":"67bb6dc7b82f1c8242988fff","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:49:43.546Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6dc7b82f1c8242989005","timestamp":"2025-02-23T18:49:43.550Z"}
{"id":"67bb6dc7b82f1c8242989005","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:49:43.555Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:49:43.559Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:49:43.562Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:49:44.048Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:49:44.060Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:49:44.071Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:49:44.081Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:44.087Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:49:44.093Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:49:44.095Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.695Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:49:59.839Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dd750e9b6070841378f","timestamp":"2025-02-23T18:49:59.840Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T18:49:59.848Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.853Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:49:59.856Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.864Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.872Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6dd750e9b60708413792","timestamp":"2025-02-23T18:49:59.876Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.882Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:49:59.887Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.892Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.899Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:59.904Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dd750e9b6070841378f","timestamp":"2025-02-23T18:49:59.905Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.910Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:49:59.915Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6dd750e9b6070841378f","timestamp":"2025-02-23T18:49:59.916Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:49:59.921Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:49:59.930Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:50:00.506Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:50:00.524Z"}
{"level":"info","message":"GET /api/stones/67bb6dd8fce4894f9bc214e9","timestamp":"2025-02-23T18:50:00.530Z"}
{"level":"info","message":"GET /api/stones/67bb6dd8fce4894f9bc214ee","timestamp":"2025-02-23T18:50:00.539Z"}
{"id":"67bb6dd8fce4894f9bc214ee","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:50:00.543Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:50:00.550Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6dd8fce4894f9bc214f0","color":"White","createdAt":"2025-02-23T18:50:00.554Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:50:00.554Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:50:00.556Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:50:00.561Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:50:00.563Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:50:00.569Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:50:00.574Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:50:00.578Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:50:00.583Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6dd8fce4894f9bc214f4","timestamp":"2025-02-23T18:50:00.592Z"}
{"id":"67bb6dd8fce4894f9bc214f4","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:50:00.600Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6dd8fce4894f9bc214fa","timestamp":"2025-02-23T18:50:00.604Z"}
{"id":"67bb6dd8fce4894f9bc214fa","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:50:00.609Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:50:00.614Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:50:00.617Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:50:01.149Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:50:01.159Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:50:01.167Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:50:01.175Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:50:01.182Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:50:01.189Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:50:01.191Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.676Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:51:21.902Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e29e578fdaa0e8bfcef","timestamp":"2025-02-23T18:51:21.904Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:51:21.908Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.916Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:51:21.919Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.928Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.936Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6e29e578fdaa0e8bfcf2","timestamp":"2025-02-23T18:51:21.941Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.946Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:51:21.952Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.956Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.963Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:51:21.969Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e29e578fdaa0e8bfcef","timestamp":"2025-02-23T18:51:21.970Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.974Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:51:21.979Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e29e578fdaa0e8bfcef","timestamp":"2025-02-23T18:51:21.980Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:21.985Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:51:21.993Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:51:22.614Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:51:22.633Z"}
{"level":"info","message":"GET /api/stones/67bb6e2afc73afc47b5f180a","timestamp":"2025-02-23T18:51:22.640Z"}
{"level":"info","message":"GET /api/stones/67bb6e2afc73afc47b5f180f","timestamp":"2025-02-23T18:51:22.649Z"}
{"id":"67bb6e2afc73afc47b5f180f","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:51:22.654Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:51:22.661Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6e2afc73afc47b5f1811","color":"White","createdAt":"2025-02-23T18:51:22.665Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:51:22.665Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:51:22.667Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:51:22.671Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:51:22.673Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:51:22.678Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:51:22.683Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:51:22.688Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:51:22.692Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e2afc73afc47b5f1815","timestamp":"2025-02-23T18:51:22.701Z"}
{"id":"67bb6e2afc73afc47b5f1815","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:51:22.708Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e2afc73afc47b5f181b","timestamp":"2025-02-23T18:51:22.712Z"}
{"id":"67bb6e2afc73afc47b5f181b","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:51:22.717Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:51:22.721Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:51:22.724Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:51:23.218Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:51:23.229Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:51:23.237Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:51:23.246Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:51:23.252Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:51:23.257Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:51:23.260Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.228Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:52:45.443Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e7dc57bad92320ab3fb","timestamp":"2025-02-23T18:52:45.446Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:52:45.453Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.459Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:52:45.463Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.472Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.480Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6e7dc57bad92320ab3fe","timestamp":"2025-02-23T18:52:45.485Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.491Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:52:45.496Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.501Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.507Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:52:45.513Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e7dc57bad92320ab3fb","timestamp":"2025-02-23T18:52:45.514Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.518Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:52:45.524Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e7dc57bad92320ab3fb","timestamp":"2025-02-23T18:52:45.525Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:45.529Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:52:45.537Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:52:46.093Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:52:46.111Z"}
{"level":"info","message":"GET /api/stones/67bb6e7e1cf8e3bfd9d28fab","timestamp":"2025-02-23T18:52:46.117Z"}
{"level":"info","message":"GET /api/stones/67bb6e7e1cf8e3bfd9d28fb0","timestamp":"2025-02-23T18:52:46.125Z"}
{"id":"67bb6e7e1cf8e3bfd9d28fb0","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:52:46.129Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:52:46.135Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6e7e1cf8e3bfd9d28fb2","color":"White","createdAt":"2025-02-23T18:52:46.139Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:52:46.139Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:52:46.141Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:52:46.145Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:52:46.148Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:52:46.153Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:52:46.158Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:52:46.162Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:52:46.167Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e7e1cf8e3bfd9d28fb6","timestamp":"2025-02-23T18:52:46.176Z"}
{"id":"67bb6e7e1cf8e3bfd9d28fb6","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:52:46.183Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e7e1cf8e3bfd9d28fbc","timestamp":"2025-02-23T18:52:46.187Z"}
{"id":"67bb6e7e1cf8e3bfd9d28fbc","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:52:46.191Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:52:46.196Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:52:46.199Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:52:46.685Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:52:46.694Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:52:46.702Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:52:46.709Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:52:46.716Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:52:46.722Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:52:46.724Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.506Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:53:10.721Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e963b4a59daf761a99b","timestamp":"2025-02-23T18:53:10.723Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:53:10.728Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.734Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:53:10.738Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.746Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.755Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6e963b4a59daf761a99e","timestamp":"2025-02-23T18:53:10.759Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.765Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:53:10.770Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.775Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.781Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:53:10.787Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e963b4a59daf761a99b","timestamp":"2025-02-23T18:53:10.788Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.792Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:53:10.798Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6e963b4a59daf761a99b","timestamp":"2025-02-23T18:53:10.799Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:10.803Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:53:10.815Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:53:11.371Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:53:11.390Z"}
{"level":"info","message":"GET /api/stones/67bb6e97a9444549f4ac953e","timestamp":"2025-02-23T18:53:11.397Z"}
{"level":"info","message":"GET /api/stones/67bb6e97a9444549f4ac9543","timestamp":"2025-02-23T18:53:11.405Z"}
{"id":"67bb6e97a9444549f4ac9543","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:53:11.409Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:11.416Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6e97a9444549f4ac9545","color":"White","createdAt":"2025-02-23T18:53:11.420Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:53:11.420Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:53:11.421Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:11.426Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:53:11.428Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:53:11.433Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:53:11.438Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:53:11.443Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:53:11.447Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e97a9444549f4ac9549","timestamp":"2025-02-23T18:53:11.456Z"}
{"id":"67bb6e97a9444549f4ac9549","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:53:11.463Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6e97a9444549f4ac954f","timestamp":"2025-02-23T18:53:11.467Z"}
{"id":"67bb6e97a9444549f4ac954f","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:53:11.471Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:53:11.476Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:53:11.479Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:53:11.982Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:53:11.992Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:53:12.000Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:53:12.007Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:12.014Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:12.020Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:53:12.022Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.281Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:53:52.516Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ec0533cabe97511cddf","timestamp":"2025-02-23T18:53:52.518Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:53:52.524Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.532Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:53:52.535Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.543Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.551Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6ec0533cabe97511cde2","timestamp":"2025-02-23T18:53:52.556Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.562Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:53:52.567Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.572Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.579Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:53:52.584Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ec0533cabe97511cddf","timestamp":"2025-02-23T18:53:52.585Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.590Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:53:52.595Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6ec0533cabe97511cddf","timestamp":"2025-02-23T18:53:52.596Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:52.601Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:53:52.612Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:53:53.175Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:53:53.195Z"}
{"level":"info","message":"GET /api/stones/67bb6ec1f6de1934bbee3a88","timestamp":"2025-02-23T18:53:53.202Z"}
{"level":"info","message":"GET /api/stones/67bb6ec1f6de1934bbee3a8d","timestamp":"2025-02-23T18:53:53.210Z"}
{"id":"67bb6ec1f6de1934bbee3a8d","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:53:53.216Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:53.222Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6ec1f6de1934bbee3a8f","color":"White","createdAt":"2025-02-23T18:53:53.226Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:53:53.226Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:53:53.227Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:53.232Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:53:53.235Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:53:53.240Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:53:53.245Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:53:53.250Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:53:53.254Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6ec1f6de1934bbee3a93","timestamp":"2025-02-23T18:53:53.264Z"}
{"id":"67bb6ec1f6de1934bbee3a93","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:53:53.271Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6ec1f6de1934bbee3a99","timestamp":"2025-02-23T18:53:53.275Z"}
{"id":"67bb6ec1f6de1934bbee3a99","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:53:53.280Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:53:53.284Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:53:53.287Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:53:53.768Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:53:53.777Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:53:53.785Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:53:53.793Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:53:53.799Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:53:53.806Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:53:53.808Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:31.895Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:55:32.150Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f233a2d02c66d56b837","timestamp":"2025-02-23T18:55:32.152Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:55:32.157Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.165Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:55:32.168Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.177Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.185Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6f243a2d02c66d56b83a","timestamp":"2025-02-23T18:55:32.190Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.195Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:55:32.201Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.205Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.212Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:55:32.217Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f233a2d02c66d56b837","timestamp":"2025-02-23T18:55:32.218Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.223Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:55:32.228Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f233a2d02c66d56b837","timestamp":"2025-02-23T18:55:32.229Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:32.234Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:55:32.242Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:55:32.779Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:55:32.796Z"}
{"level":"info","message":"GET /api/stones/67bb6f24eb4abe9872de9e61","timestamp":"2025-02-23T18:55:32.802Z"}
{"level":"info","message":"GET /api/stones/67bb6f24eb4abe9872de9e66","timestamp":"2025-02-23T18:55:32.811Z"}
{"id":"67bb6f24eb4abe9872de9e66","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:55:32.815Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:55:32.822Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6f24eb4abe9872de9e68","color":"White","createdAt":"2025-02-23T18:55:32.826Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:55:32.826Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:55:32.827Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:55:32.832Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:55:32.834Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:55:32.839Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:55:32.844Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:55:32.848Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:55:32.852Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6f24eb4abe9872de9e6c","timestamp":"2025-02-23T18:55:32.861Z"}
{"id":"67bb6f24eb4abe9872de9e6c","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:55:32.868Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6f24eb4abe9872de9e72","timestamp":"2025-02-23T18:55:32.872Z"}
{"id":"67bb6f24eb4abe9872de9e72","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:55:32.877Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:55:32.881Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:55:32.884Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:55:33.373Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:55:33.383Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:55:33.391Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:55:33.400Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:55:33.405Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:55:33.411Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:55:33.414Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.606Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:57:10.832Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f8619284760ffd6779e","timestamp":"2025-02-23T18:57:10.834Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:57:10.842Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.848Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:57:10.851Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.860Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.867Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6f8619284760ffd677a1","timestamp":"2025-02-23T18:57:10.871Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.875Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:57:10.880Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.885Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.890Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:57:10.896Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f8619284760ffd6779e","timestamp":"2025-02-23T18:57:10.897Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.901Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:57:10.906Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6f8619284760ffd6779e","timestamp":"2025-02-23T18:57:10.907Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:10.911Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:57:10.923Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:57:11.460Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:57:11.476Z"}
{"level":"info","message":"GET /api/stones/67bb6f879efa5866fc4194d7","timestamp":"2025-02-23T18:57:11.484Z"}
{"level":"info","message":"GET /api/stones/67bb6f879efa5866fc4194dc","timestamp":"2025-02-23T18:57:11.493Z"}
{"id":"67bb6f879efa5866fc4194dc","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:57:11.497Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:57:11.503Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6f879efa5866fc4194de","color":"White","createdAt":"2025-02-23T18:57:11.507Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:57:11.507Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:57:11.509Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:57:11.514Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:57:11.516Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:57:11.521Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:57:11.525Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:57:11.530Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:57:11.534Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6f879efa5866fc4194e2","timestamp":"2025-02-23T18:57:11.543Z"}
{"id":"67bb6f879efa5866fc4194e2","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:57:11.550Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6f879efa5866fc4194e8","timestamp":"2025-02-23T18:57:11.554Z"}
{"id":"67bb6f879efa5866fc4194e8","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:57:11.558Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:57:11.563Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:57:11.566Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:57:12.037Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:57:12.047Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:57:12.055Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:57:12.063Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:57:12.070Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:57:12.076Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:57:12.078Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.446Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T18:58:38.720Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6fde63ddd393764f415f","timestamp":"2025-02-23T18:58:38.723Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T18:58:38.734Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.741Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T18:58:38.745Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.754Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.763Z"}
{"level":"warn","message":"Stone not found with ID: 67bb6fde63ddd393764f4162","timestamp":"2025-02-23T18:58:38.768Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.774Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T18:58:38.779Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.785Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.791Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:58:38.797Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6fde63ddd393764f415f","timestamp":"2025-02-23T18:58:38.798Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.802Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T18:58:38.807Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb6fde63ddd393764f415f","timestamp":"2025-02-23T18:58:38.808Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:38.813Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T18:58:38.821Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T18:58:39.909Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T18:58:39.926Z"}
{"level":"info","message":"GET /api/stones/67bb6fdf23d230854d98f595","timestamp":"2025-02-23T18:58:39.932Z"}
{"level":"info","message":"GET /api/stones/67bb6fdf23d230854d98f59a","timestamp":"2025-02-23T18:58:39.941Z"}
{"id":"67bb6fdf23d230854d98f59a","level":"warn","message":"Stone not found","timestamp":"2025-02-23T18:58:39.945Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:58:39.952Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb6fdf23d230854d98f59c","color":"White","createdAt":"2025-02-23T18:58:39.956Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T18:58:39.956Z","usage":["bathroom"]},"timestamp":"2025-02-23T18:58:39.957Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:58:39.962Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:58:39.965Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T18:58:39.970Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T18:58:39.974Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T18:58:39.979Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T18:58:39.983Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6fdf23d230854d98f5a0","timestamp":"2025-02-23T18:58:39.992Z"}
{"id":"67bb6fdf23d230854d98f5a0","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T18:58:39.999Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb6fe023d230854d98f5a6","timestamp":"2025-02-23T18:58:40.003Z"}
{"id":"67bb6fe023d230854d98f5a6","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T18:58:40.008Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:58:40.012Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T18:58:40.015Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T18:58:40.494Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T18:58:40.503Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T18:58:40.511Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T18:58:40.519Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T18:58:40.526Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T18:58:40.533Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T18:58:40.535Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:22.903Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:00:23.129Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7046f4a45debc7d7a4d6","timestamp":"2025-02-23T19:00:23.131Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:00:23.142Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.148Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:00:23.151Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.160Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.169Z"}
{"level":"warn","message":"Stone not found with ID: 67bb7047f4a45debc7d7a4d9","timestamp":"2025-02-23T19:00:23.174Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.179Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:00:23.184Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.190Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.196Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:00:23.202Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7046f4a45debc7d7a4d6","timestamp":"2025-02-23T19:00:23.203Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.207Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:00:23.213Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7046f4a45debc7d7a4d6","timestamp":"2025-02-23T19:00:23.214Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:23.219Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:00:23.230Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:00:23.784Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:00:23.803Z"}
{"level":"info","message":"GET /api/stones/67bb704745f3a2acd73a440d","timestamp":"2025-02-23T19:00:23.809Z"}
{"level":"info","message":"GET /api/stones/67bb704745f3a2acd73a4412","timestamp":"2025-02-23T19:00:23.818Z"}
{"id":"67bb704745f3a2acd73a4412","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:00:23.823Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:00:23.830Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb704745f3a2acd73a4414","color":"White","createdAt":"2025-02-23T19:00:23.834Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:00:23.834Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:00:23.835Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:00:23.840Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:00:23.842Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:00:23.847Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:00:23.852Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:00:23.856Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:00:23.860Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb704745f3a2acd73a4418","timestamp":"2025-02-23T19:00:23.870Z"}
{"id":"67bb704745f3a2acd73a4418","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:00:23.877Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb704745f3a2acd73a441e","timestamp":"2025-02-23T19:00:23.881Z"}
{"id":"67bb704745f3a2acd73a441e","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:00:23.886Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:00:23.890Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:00:23.893Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:00:24.846Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:00:24.855Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:00:24.864Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:00:24.872Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:00:24.878Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:00:24.884Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:00:24.886Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.322Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:03:24.509Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb70fcbcc3cc7e63ac49ac","timestamp":"2025-02-23T19:03:24.511Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T19:03:24.519Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.524Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:03:24.528Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.536Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.544Z"}
{"level":"warn","message":"Stone not found with ID: 67bb70fcbcc3cc7e63ac49af","timestamp":"2025-02-23T19:03:24.549Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.554Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:03:24.559Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.564Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.571Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:03:24.576Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb70fcbcc3cc7e63ac49ac","timestamp":"2025-02-23T19:03:24.577Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.581Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:03:24.586Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb70fcbcc3cc7e63ac49ac","timestamp":"2025-02-23T19:03:24.587Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:24.591Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:03:24.601Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:03:25.170Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:03:25.188Z"}
{"level":"info","message":"GET /api/stones/67bb70fd4e41e9ad21b27674","timestamp":"2025-02-23T19:03:25.194Z"}
{"level":"info","message":"GET /api/stones/67bb70fd4e41e9ad21b27679","timestamp":"2025-02-23T19:03:25.204Z"}
{"id":"67bb70fd4e41e9ad21b27679","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:03:25.208Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:03:25.214Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb70fd4e41e9ad21b2767b","color":"White","createdAt":"2025-02-23T19:03:25.218Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:03:25.218Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:03:25.219Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:03:25.224Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:03:25.226Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:03:25.231Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:03:25.235Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:03:25.240Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:03:25.244Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb70fd4e41e9ad21b2767f","timestamp":"2025-02-23T19:03:25.253Z"}
{"id":"67bb70fd4e41e9ad21b2767f","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:03:25.260Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb70fd4e41e9ad21b27685","timestamp":"2025-02-23T19:03:25.264Z"}
{"id":"67bb70fd4e41e9ad21b27685","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:03:25.269Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:03:25.273Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:03:25.275Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:03:25.759Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:03:25.769Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:03:25.777Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:03:25.785Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:03:25.791Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:03:25.798Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:03:25.800Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.297Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:10:51.530Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72bb02f4a443a77a3e61","timestamp":"2025-02-23T19:10:51.531Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:10:51.540Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.546Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:10:51.549Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.557Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.565Z"}
{"level":"warn","message":"Stone not found with ID: 67bb72bb02f4a443a77a3e64","timestamp":"2025-02-23T19:10:51.570Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.575Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:10:51.579Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.585Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.591Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:10:51.596Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72bb02f4a443a77a3e61","timestamp":"2025-02-23T19:10:51.597Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.601Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:10:51.606Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72bb02f4a443a77a3e61","timestamp":"2025-02-23T19:10:51.608Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:51.612Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:10:51.621Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:10:52.189Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:10:52.208Z"}
{"level":"info","message":"GET /api/stones/67bb72bcbb1398e3d80cdd66","timestamp":"2025-02-23T19:10:52.214Z"}
{"level":"info","message":"GET /api/stones/67bb72bcbb1398e3d80cdd6b","timestamp":"2025-02-23T19:10:52.223Z"}
{"id":"67bb72bcbb1398e3d80cdd6b","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:10:52.229Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:10:52.236Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb72bcbb1398e3d80cdd6d","color":"White","createdAt":"2025-02-23T19:10:52.240Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:10:52.240Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:10:52.242Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:10:52.247Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:10:52.249Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:10:52.255Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:10:52.260Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:10:52.265Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:10:52.269Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb72bcbb1398e3d80cdd71","timestamp":"2025-02-23T19:10:52.278Z"}
{"id":"67bb72bcbb1398e3d80cdd71","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:10:52.285Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb72bcbb1398e3d80cdd77","timestamp":"2025-02-23T19:10:52.289Z"}
{"id":"67bb72bcbb1398e3d80cdd77","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:10:52.294Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:10:52.298Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:10:52.301Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:10:53.337Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:10:53.346Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:10:53.354Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:10:53.362Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:10:53.368Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:10:53.375Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:10:53.377Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.000Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:11:37.206Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72e8fb0a0445c0a5c5ad","timestamp":"2025-02-23T19:11:37.208Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:11:37.216Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.224Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:11:37.227Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.236Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.244Z"}
{"level":"warn","message":"Stone not found with ID: 67bb72e9fb0a0445c0a5c5b0","timestamp":"2025-02-23T19:11:37.249Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.255Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:11:37.259Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.265Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.271Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:11:37.277Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72e8fb0a0445c0a5c5ad","timestamp":"2025-02-23T19:11:37.278Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.282Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:11:37.290Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb72e8fb0a0445c0a5c5ad","timestamp":"2025-02-23T19:11:37.291Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:37.296Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:11:37.305Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:11:37.872Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:11:37.888Z"}
{"level":"info","message":"GET /api/stones/67bb72e9541757341812a790","timestamp":"2025-02-23T19:11:37.895Z"}
{"level":"info","message":"GET /api/stones/67bb72e9541757341812a795","timestamp":"2025-02-23T19:11:37.904Z"}
{"id":"67bb72e9541757341812a795","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:11:37.908Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:11:37.915Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb72e9541757341812a797","color":"White","createdAt":"2025-02-23T19:11:37.919Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:11:37.919Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:11:37.920Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:11:37.925Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:11:37.927Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:11:37.933Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:11:37.937Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:11:37.941Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:11:37.945Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb72e9541757341812a79b","timestamp":"2025-02-23T19:11:37.955Z"}
{"id":"67bb72e9541757341812a79b","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:11:37.961Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb72e9541757341812a7a1","timestamp":"2025-02-23T19:11:37.966Z"}
{"id":"67bb72e9541757341812a7a1","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:11:37.970Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:11:37.974Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:11:37.977Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:11:38.489Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:11:38.499Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:11:38.508Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:11:38.516Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:11:38.522Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:11:38.529Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:11:38.531Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.459Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:12:39.716Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7327e56a8a2a13744d82","timestamp":"2025-02-23T19:12:39.718Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:12:39.726Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.734Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:12:39.737Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.746Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.754Z"}
{"level":"warn","message":"Stone not found with ID: 67bb7327e56a8a2a13744d85","timestamp":"2025-02-23T19:12:39.760Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.765Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:12:39.770Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.775Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.782Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:12:39.788Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7327e56a8a2a13744d82","timestamp":"2025-02-23T19:12:39.789Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.793Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:12:39.798Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb7327e56a8a2a13744d82","timestamp":"2025-02-23T19:12:39.799Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:39.804Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:12:39.813Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:12:40.356Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:12:40.375Z"}
{"level":"info","message":"GET /api/stones/67bb73284e62330bc962dc90","timestamp":"2025-02-23T19:12:40.382Z"}
{"level":"info","message":"GET /api/stones/67bb73284e62330bc962dc95","timestamp":"2025-02-23T19:12:40.391Z"}
{"id":"67bb73284e62330bc962dc95","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:12:40.395Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:12:40.401Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb73284e62330bc962dc97","color":"White","createdAt":"2025-02-23T19:12:40.405Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:12:40.405Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:12:40.407Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:12:40.411Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:12:40.414Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:12:40.419Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:12:40.423Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:12:40.428Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:12:40.432Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb73284e62330bc962dc9b","timestamp":"2025-02-23T19:12:40.441Z"}
{"id":"67bb73284e62330bc962dc9b","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:12:40.448Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb73284e62330bc962dca1","timestamp":"2025-02-23T19:12:40.452Z"}
{"id":"67bb73284e62330bc962dca1","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:12:40.457Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:12:40.461Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:12:40.464Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:12:40.958Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:12:40.968Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:12:40.976Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:12:40.984Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:12:40.990Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:12:40.997Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:12:40.999Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.363Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:14:34.599Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb739a0d50893fb49355cf","timestamp":"2025-02-23T19:14:34.601Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:14:34.607Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.614Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:14:34.619Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.626Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.634Z"}
{"level":"warn","message":"Stone not found with ID: 67bb739a0d50893fb49355d2","timestamp":"2025-02-23T19:14:34.639Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.644Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:14:34.649Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.654Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.660Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:14:34.665Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb739a0d50893fb49355cf","timestamp":"2025-02-23T19:14:34.666Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.670Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:14:34.675Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb739a0d50893fb49355cf","timestamp":"2025-02-23T19:14:34.676Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:34.680Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:14:34.689Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:14:35.238Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:14:35.259Z"}
{"level":"info","message":"GET /api/stones/67bb739bca01fd0cb62ed658","timestamp":"2025-02-23T19:14:35.265Z"}
{"level":"info","message":"GET /api/stones/67bb739bca01fd0cb62ed65d","timestamp":"2025-02-23T19:14:35.273Z"}
{"id":"67bb739bca01fd0cb62ed65d","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:14:35.278Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:14:35.284Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb739bca01fd0cb62ed65f","color":"White","createdAt":"2025-02-23T19:14:35.288Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:14:35.288Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:14:35.289Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:14:35.294Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:14:35.296Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:14:35.301Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:14:35.305Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:14:35.310Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:14:35.314Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb739bca01fd0cb62ed663","timestamp":"2025-02-23T19:14:35.323Z"}
{"id":"67bb739bca01fd0cb62ed663","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:14:35.329Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb739bca01fd0cb62ed669","timestamp":"2025-02-23T19:14:35.333Z"}
{"id":"67bb739bca01fd0cb62ed669","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:14:35.337Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:14:35.341Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:14:35.344Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:14:35.822Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:14:35.831Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:14:35.839Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:14:35.847Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:14:35.853Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:14:35.859Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:14:35.861Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.307Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:15:45.446Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb73e112ffde03a3957e4a","timestamp":"2025-02-23T19:15:45.448Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.41,"priceUSD":112.98,"timestamp":"2025-02-23T19:15:45.453Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.459Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:15:45.462Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.469Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.475Z"}
{"level":"warn","message":"Stone not found with ID: 67bb73e112ffde03a3957e4d","timestamp":"2025-02-23T19:15:45.480Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.484Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:15:45.489Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.493Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.500Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:15:45.505Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb73e112ffde03a3957e4a","timestamp":"2025-02-23T19:15:45.506Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.510Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:15:45.516Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb73e112ffde03a3957e4a","timestamp":"2025-02-23T19:15:45.517Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.521Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:15:45.529Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:45.543Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-23T19:15:45.545Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:15:46.108Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:15:46.126Z"}
{"level":"info","message":"GET /api/stones/67bb73e2725c36cc9f42017e","timestamp":"2025-02-23T19:15:46.133Z"}
{"level":"info","message":"GET /api/stones/67bb73e2725c36cc9f420183","timestamp":"2025-02-23T19:15:46.142Z"}
{"id":"67bb73e2725c36cc9f420183","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:15:46.146Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:15:46.152Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb73e2725c36cc9f420185","color":"White","createdAt":"2025-02-23T19:15:46.156Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:15:46.156Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:15:46.157Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:15:46.162Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:15:46.164Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:15:46.170Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:15:46.174Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:15:46.178Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:15:46.183Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb73e2725c36cc9f420189","timestamp":"2025-02-23T19:15:46.192Z"}
{"id":"67bb73e2725c36cc9f420189","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:15:46.199Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb73e2725c36cc9f42018f","timestamp":"2025-02-23T19:15:46.203Z"}
{"id":"67bb73e2725c36cc9f42018f","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:15:46.207Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:15:46.212Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:15:46.215Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:15:46.697Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:15:46.707Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:15:46.716Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:15:46.723Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:15:46.729Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:15:46.736Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:15:46.738Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.699Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-23T19:19:11.904Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb74af4a0b549647978d37","timestamp":"2025-02-23T19:19:11.906Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-23T19:19:11.915Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.921Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-23T19:19:11.925Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.934Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.942Z"}
{"level":"warn","message":"Stone not found with ID: 67bb74af4a0b549647978d3a","timestamp":"2025-02-23T19:19:11.946Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.952Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-23T19:19:11.957Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.962Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.969Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:19:11.975Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb74af4a0b549647978d37","timestamp":"2025-02-23T19:19:11.976Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.980Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-23T19:19:11.985Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bb74af4a0b549647978d37","timestamp":"2025-02-23T19:19:11.986Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:11.991Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-23T19:19:12.000Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:12.014Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-23T19:19:12.016Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-23T19:19:12.582Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-23T19:19:12.600Z"}
{"level":"info","message":"GET /api/stones/67bb74b0e1f3430bada9e46e","timestamp":"2025-02-23T19:19:12.605Z"}
{"level":"info","message":"GET /api/stones/67bb74b0e1f3430bada9e473","timestamp":"2025-02-23T19:19:12.614Z"}
{"id":"67bb74b0e1f3430bada9e473","level":"warn","message":"Stone not found","timestamp":"2025-02-23T19:19:12.619Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:19:12.625Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bb74b0e1f3430bada9e475","color":"White","createdAt":"2025-02-23T19:19:12.629Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-23T19:19:12.629Z","usage":["bathroom"]},"timestamp":"2025-02-23T19:19:12.631Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:19:12.636Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:19:12.638Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-23T19:19:12.643Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-23T19:19:12.648Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-23T19:19:12.653Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-23T19:19:12.657Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb74b0e1f3430bada9e479","timestamp":"2025-02-23T19:19:12.666Z"}
{"id":"67bb74b0e1f3430bada9e479","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-23T19:19:12.673Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bb74b0e1f3430bada9e47f","timestamp":"2025-02-23T19:19:12.677Z"}
{"id":"67bb74b0e1f3430bada9e47f","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-23T19:19:12.681Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:19:12.686Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-23T19:19:12.688Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-23T19:19:13.196Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-23T19:19:13.207Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-23T19:19:13.214Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-23T19:19:13.222Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-23T19:19:13.228Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-23T19:19:13.234Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-23T19:19:13.236Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.327Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T09:51:44.533Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4130cf424e35a34e4902","timestamp":"2025-02-24T09:51:44.534Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T09:51:44.541Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.546Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T09:51:44.549Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.557Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.564Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4130cf424e35a34e4905","timestamp":"2025-02-24T09:51:44.568Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.574Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T09:51:44.578Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.583Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.589Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T09:51:44.595Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4130cf424e35a34e4902","timestamp":"2025-02-24T09:51:44.596Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.600Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T09:51:44.605Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4130cf424e35a34e4902","timestamp":"2025-02-24T09:51:44.606Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.611Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:173:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T09:51:44.619Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:44.633Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T09:51:44.635Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T09:51:45.418Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T09:51:45.437Z"}
{"level":"info","message":"GET /api/stones/67bc4131d8ca9ab846b28762","timestamp":"2025-02-24T09:51:45.443Z"}
{"level":"info","message":"GET /api/stones/67bc4131d8ca9ab846b28767","timestamp":"2025-02-24T09:51:45.452Z"}
{"id":"67bc4131d8ca9ab846b28767","level":"warn","message":"Stone not found","timestamp":"2025-02-24T09:51:45.456Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T09:51:45.463Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4131d8ca9ab846b28769","color":"White","createdAt":"2025-02-24T09:51:45.467Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T09:51:45.467Z","usage":["bathroom"]},"timestamp":"2025-02-24T09:51:45.468Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T09:51:45.473Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T09:51:45.475Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T09:51:45.480Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T09:51:45.485Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T09:51:45.490Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T09:51:45.494Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4131d8ca9ab846b2876d","timestamp":"2025-02-24T09:51:45.503Z"}
{"id":"67bc4131d8ca9ab846b2876d","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T09:51:45.515Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4131d8ca9ab846b28773","timestamp":"2025-02-24T09:51:45.519Z"}
{"id":"67bc4131d8ca9ab846b28773","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T09:51:45.523Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T09:51:45.528Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T09:51:45.530Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T09:51:46.322Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T09:51:46.334Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T09:51:46.343Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T09:51:46.351Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T09:51:46.359Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T09:51:46.365Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T09:51:46.368Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.714Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:01:48.894Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc438c990f0c5b93b87653","timestamp":"2025-02-24T10:01:48.896Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:01:48.904Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.909Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:01:48.912Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.921Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.928Z"}
{"level":"warn","message":"Stone not found with ID: 67bc438c990f0c5b93b87656","timestamp":"2025-02-24T10:01:48.933Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.938Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:01:48.943Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.948Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.954Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:01:48.960Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc438c990f0c5b93b87653","timestamp":"2025-02-24T10:01:48.961Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.965Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:01:48.970Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc438c990f0c5b93b87653","timestamp":"2025-02-24T10:01:48.971Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.976Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:01:48.984Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:48.998Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:01:49.000Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:01:49.548Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:01:49.562Z"}
{"level":"info","message":"GET /api/stones/67bc438d5333418cdc8db595","timestamp":"2025-02-24T10:01:49.569Z"}
{"level":"info","message":"GET /api/stones/67bc438d5333418cdc8db59a","timestamp":"2025-02-24T10:01:49.577Z"}
{"id":"67bc438d5333418cdc8db59a","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:01:49.582Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:01:49.588Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc438d5333418cdc8db59c","color":"White","createdAt":"2025-02-24T10:01:49.592Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:01:49.592Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:01:49.594Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:01:49.603Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:01:49.605Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:01:49.611Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:01:49.615Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:01:49.620Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:01:49.624Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc438d5333418cdc8db5a0","timestamp":"2025-02-24T10:01:49.634Z"}
{"id":"67bc438d5333418cdc8db5a0","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:01:49.641Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc438d5333418cdc8db5a6","timestamp":"2025-02-24T10:01:49.645Z"}
{"id":"67bc438d5333418cdc8db5a6","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:01:49.649Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:01:49.653Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:01:49.656Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:01:50.143Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:01:50.153Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:01:50.163Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:01:50.169Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:01:50.176Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:01:50.183Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:01:50.185Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.683Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:07:57.858Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc44fd14c18ddf74d8cc38","timestamp":"2025-02-24T10:07:57.860Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:07:57.868Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.874Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:07:57.878Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.886Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.894Z"}
{"level":"warn","message":"Stone not found with ID: 67bc44fd14c18ddf74d8cc3b","timestamp":"2025-02-24T10:07:57.899Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.904Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:07:57.909Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.914Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.921Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:07:57.926Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc44fd14c18ddf74d8cc38","timestamp":"2025-02-24T10:07:57.927Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.932Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:07:57.938Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc44fd14c18ddf74d8cc38","timestamp":"2025-02-24T10:07:57.939Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.944Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:07:57.953Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:57.966Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:07:57.968Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:07:58.500Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:07:58.518Z"}
{"level":"info","message":"GET /api/stones/67bc44fe5b1b7120949b5276","timestamp":"2025-02-24T10:07:58.525Z"}
{"level":"info","message":"GET /api/stones/67bc44fe5b1b7120949b527b","timestamp":"2025-02-24T10:07:58.534Z"}
{"id":"67bc44fe5b1b7120949b527b","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:07:58.538Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:07:58.545Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc44fe5b1b7120949b527d","color":"White","createdAt":"2025-02-24T10:07:58.549Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:07:58.549Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:07:58.550Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:07:58.555Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:07:58.557Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:07:58.562Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:07:58.567Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:07:58.571Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:07:58.576Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc44fe5b1b7120949b5281","timestamp":"2025-02-24T10:07:58.585Z"}
{"id":"67bc44fe5b1b7120949b5281","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:07:58.592Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc44fe5b1b7120949b5287","timestamp":"2025-02-24T10:07:58.596Z"}
{"id":"67bc44fe5b1b7120949b5287","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:07:58.601Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:07:58.605Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:07:58.608Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:07:59.536Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:07:59.546Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:07:59.554Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:07:59.562Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:07:59.569Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:07:59.575Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:07:59.577Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.423Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:10:10.567Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc458217dcf7e334b85a62","timestamp":"2025-02-24T10:10:10.568Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:10:10.573Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.580Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:10:10.583Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.590Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.596Z"}
{"level":"warn","message":"Stone not found with ID: 67bc458217dcf7e334b85a65","timestamp":"2025-02-24T10:10:10.600Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.604Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:10:10.609Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.613Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.620Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:10:10.624Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc458217dcf7e334b85a62","timestamp":"2025-02-24T10:10:10.625Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.629Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:10:10.634Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc458217dcf7e334b85a62","timestamp":"2025-02-24T10:10:10.635Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.640Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:10:10.648Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:10.660Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:10:10.663Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:10:11.176Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:10:11.193Z"}
{"level":"info","message":"GET /api/stones/67bc4583f450c8c61b8a3b14","timestamp":"2025-02-24T10:10:11.199Z"}
{"level":"info","message":"GET /api/stones/67bc4583f450c8c61b8a3b19","timestamp":"2025-02-24T10:10:11.207Z"}
{"id":"67bc4583f450c8c61b8a3b19","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:10:11.211Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:10:11.217Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4583f450c8c61b8a3b1b","color":"White","createdAt":"2025-02-24T10:10:11.221Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:10:11.221Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:10:11.222Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:10:11.227Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:10:11.229Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:10:11.234Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:10:11.239Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:10:11.243Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:10:11.247Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4583f450c8c61b8a3b1f","timestamp":"2025-02-24T10:10:11.256Z"}
{"id":"67bc4583f450c8c61b8a3b1f","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:10:11.263Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4583f450c8c61b8a3b25","timestamp":"2025-02-24T10:10:11.267Z"}
{"id":"67bc4583f450c8c61b8a3b25","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:10:11.271Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:10:11.275Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:10:11.278Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:10:11.752Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:10:11.761Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:10:11.769Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:10:11.778Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:10:11.784Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:10:11.789Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:10:11.792Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.135Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:12:00.262Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc45f038aafdc2d4d0af80","timestamp":"2025-02-24T10:12:00.264Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:12:00.270Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.275Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:12:00.278Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.285Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.292Z"}
{"level":"warn","message":"Stone not found with ID: 67bc45f038aafdc2d4d0af83","timestamp":"2025-02-24T10:12:00.297Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.302Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:12:00.306Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.311Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.317Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:12:00.323Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc45f038aafdc2d4d0af80","timestamp":"2025-02-24T10:12:00.324Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.328Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:12:00.333Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc45f038aafdc2d4d0af80","timestamp":"2025-02-24T10:12:00.334Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.339Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:12:00.348Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:00.361Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:12:00.363Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:12:00.887Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:12:00.905Z"}
{"level":"info","message":"GET /api/stones/67bc45f098d56e9ff89cf2df","timestamp":"2025-02-24T10:12:00.911Z"}
{"level":"info","message":"GET /api/stones/67bc45f098d56e9ff89cf2e4","timestamp":"2025-02-24T10:12:00.920Z"}
{"id":"67bc45f098d56e9ff89cf2e4","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:12:00.924Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:00.930Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc45f098d56e9ff89cf2e6","color":"White","createdAt":"2025-02-24T10:12:00.934Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:12:00.934Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:12:00.935Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:00.940Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:12:00.942Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:12:00.948Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:12:00.952Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:12:00.957Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:12:00.961Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc45f098d56e9ff89cf2ea","timestamp":"2025-02-24T10:12:00.970Z"}
{"id":"67bc45f098d56e9ff89cf2ea","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:12:00.977Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc45f098d56e9ff89cf2f0","timestamp":"2025-02-24T10:12:00.981Z"}
{"id":"67bc45f098d56e9ff89cf2f0","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:12:00.986Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:12:00.990Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:12:00.993Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:12:01.539Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:12:01.549Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:12:01.557Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:12:01.565Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:01.571Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:01.577Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:12:01.579Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.305Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:12:53.432Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4625cac868904a980933","timestamp":"2025-02-24T10:12:53.433Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:12:53.438Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.444Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:12:53.447Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.454Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.460Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4625cac868904a980936","timestamp":"2025-02-24T10:12:53.465Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.470Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:12:53.474Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.479Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.485Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:12:53.491Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4625cac868904a980933","timestamp":"2025-02-24T10:12:53.492Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.498Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:12:53.504Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4625cac868904a980933","timestamp":"2025-02-24T10:12:53.505Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.510Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:12:53.519Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:53.533Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:12:53.536Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:12:54.068Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:12:54.082Z"}
{"level":"info","message":"GET /api/stones/67bc46267d96d947fd98454b","timestamp":"2025-02-24T10:12:54.089Z"}
{"level":"info","message":"GET /api/stones/67bc46267d96d947fd984550","timestamp":"2025-02-24T10:12:54.098Z"}
{"id":"67bc46267d96d947fd984550","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:12:54.102Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:54.108Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc46267d96d947fd984552","color":"White","createdAt":"2025-02-24T10:12:54.111Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:12:54.111Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:12:54.113Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:54.117Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:12:54.120Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:12:54.125Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:12:54.130Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:12:54.134Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:12:54.138Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc46267d96d947fd984556","timestamp":"2025-02-24T10:12:54.147Z"}
{"id":"67bc46267d96d947fd984556","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:12:54.154Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc46267d96d947fd98455c","timestamp":"2025-02-24T10:12:54.157Z"}
{"id":"67bc46267d96d947fd98455c","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:12:54.162Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:12:54.166Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:12:54.169Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:12:54.654Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:12:54.664Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:12:54.672Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:12:54.680Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:12:54.686Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:12:54.692Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:12:54.694Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.668Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:25:36.857Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49209db84b95c63eb43c","timestamp":"2025-02-24T10:25:36.858Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:25:36.864Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.869Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:25:36.871Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.878Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.885Z"}
{"level":"warn","message":"Stone not found with ID: 67bc49209db84b95c63eb43f","timestamp":"2025-02-24T10:25:36.889Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.894Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:25:36.898Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.903Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.910Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:25:36.914Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49209db84b95c63eb43c","timestamp":"2025-02-24T10:25:36.916Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.921Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:25:36.925Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49209db84b95c63eb43c","timestamp":"2025-02-24T10:25:36.927Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.932Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:25:36.941Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:36.955Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:25:36.958Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:25:37.508Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:25:37.524Z"}
{"level":"info","message":"GET /api/stones/67bc492129edc9a35b7daeba","timestamp":"2025-02-24T10:25:37.530Z"}
{"level":"info","message":"GET /api/stones/67bc492129edc9a35b7daebf","timestamp":"2025-02-24T10:25:37.538Z"}
{"id":"67bc492129edc9a35b7daebf","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:25:37.542Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:25:37.548Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc492129edc9a35b7daec1","color":"White","createdAt":"2025-02-24T10:25:37.552Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:25:37.552Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:25:37.554Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:25:37.559Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:25:37.561Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:25:37.567Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:25:37.571Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:25:37.576Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:25:37.580Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc492129edc9a35b7daec5","timestamp":"2025-02-24T10:25:37.589Z"}
{"id":"67bc492129edc9a35b7daec5","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:25:37.595Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc492129edc9a35b7daecb","timestamp":"2025-02-24T10:25:37.600Z"}
{"id":"67bc492129edc9a35b7daecb","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:25:37.604Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:25:37.608Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:25:37.611Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:25:38.094Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:25:38.105Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:25:38.113Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:25:38.121Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:25:38.128Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:25:38.135Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:25:38.137Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.409Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:26:14.572Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49465b2d871087c5830c","timestamp":"2025-02-24T10:26:14.573Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:26:14.582Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.588Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:26:14.591Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.600Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.608Z"}
{"level":"warn","message":"Stone not found with ID: 67bc49465b2d871087c5830f","timestamp":"2025-02-24T10:26:14.612Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.618Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:26:14.622Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.627Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.637Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:26:14.642Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49465b2d871087c5830c","timestamp":"2025-02-24T10:26:14.643Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.648Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:26:14.653Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc49465b2d871087c5830c","timestamp":"2025-02-24T10:26:14.654Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.660Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:26:14.670Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:14.685Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:26:14.687Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:26:15.221Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:26:15.237Z"}
{"level":"info","message":"GET /api/stones/67bc494726e6a826e47e004f","timestamp":"2025-02-24T10:26:15.242Z"}
{"level":"info","message":"GET /api/stones/67bc494726e6a826e47e0054","timestamp":"2025-02-24T10:26:15.250Z"}
{"id":"67bc494726e6a826e47e0054","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:26:15.254Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:15.260Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc494726e6a826e47e0056","color":"White","createdAt":"2025-02-24T10:26:15.264Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:26:15.264Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:26:15.266Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:15.270Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:26:15.273Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:26:15.278Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:26:15.283Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:26:15.287Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:26:15.291Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc494726e6a826e47e005a","timestamp":"2025-02-24T10:26:15.301Z"}
{"id":"67bc494726e6a826e47e005a","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:26:15.308Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc494726e6a826e47e0060","timestamp":"2025-02-24T10:26:15.311Z"}
{"id":"67bc494726e6a826e47e0060","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:26:15.316Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:26:15.320Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:26:15.323Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:26:15.799Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:26:15.810Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:26:15.818Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:26:15.827Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:15.832Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:15.839Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:26:15.841Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.131Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:26:44.297Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4964092038519589c2a5","timestamp":"2025-02-24T10:26:44.298Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:26:44.307Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.313Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:26:44.316Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.325Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.333Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4964092038519589c2a8","timestamp":"2025-02-24T10:26:44.337Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.343Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:26:44.347Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.353Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.359Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:26:44.366Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4964092038519589c2a5","timestamp":"2025-02-24T10:26:44.367Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.371Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:26:44.376Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4964092038519589c2a5","timestamp":"2025-02-24T10:26:44.378Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.383Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:26:44.392Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:44.406Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:26:44.409Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:26:44.936Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:26:44.955Z"}
{"level":"info","message":"GET /api/stones/67bc496477fd3f7521885e89","timestamp":"2025-02-24T10:26:44.960Z"}
{"level":"info","message":"GET /api/stones/67bc496477fd3f7521885e8e","timestamp":"2025-02-24T10:26:44.968Z"}
{"id":"67bc496477fd3f7521885e8e","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:26:44.972Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:44.979Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc496477fd3f7521885e90","color":"White","createdAt":"2025-02-24T10:26:44.983Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:26:44.983Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:26:44.984Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:44.989Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:26:44.991Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:26:44.997Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:26:45.002Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:26:45.007Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:26:45.011Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc496577fd3f7521885e94","timestamp":"2025-02-24T10:26:45.020Z"}
{"id":"67bc496577fd3f7521885e94","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:26:45.027Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc496577fd3f7521885e9a","timestamp":"2025-02-24T10:26:45.031Z"}
{"id":"67bc496577fd3f7521885e9a","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:26:45.036Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:26:45.040Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:26:45.043Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:26:45.522Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:26:45.532Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:26:45.541Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:26:45.549Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:26:45.555Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:26:45.561Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:26:45.564Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.173Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:27:23.312Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc498b12d3b915051bce10","timestamp":"2025-02-24T10:27:23.314Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:27:23.322Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.327Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:27:23.330Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.338Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.345Z"}
{"level":"warn","message":"Stone not found with ID: 67bc498b12d3b915051bce13","timestamp":"2025-02-24T10:27:23.349Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.354Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:27:23.359Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.364Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.370Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:27:23.375Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc498b12d3b915051bce10","timestamp":"2025-02-24T10:27:23.376Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.380Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:27:23.385Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc498b12d3b915051bce10","timestamp":"2025-02-24T10:27:23.386Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.391Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:27:23.400Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:23.415Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:27:23.417Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:27:23.960Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:27:23.974Z"}
{"level":"info","message":"GET /api/stones/67bc498bbabe0426bf94c91e","timestamp":"2025-02-24T10:27:23.979Z"}
{"level":"info","message":"GET /api/stones/67bc498bbabe0426bf94c923","timestamp":"2025-02-24T10:27:23.987Z"}
{"id":"67bc498bbabe0426bf94c923","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:27:23.991Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:27:23.997Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc498cbabe0426bf94c925","color":"White","createdAt":"2025-02-24T10:27:24.001Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:27:24.001Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:27:24.003Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:27:24.008Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:27:24.010Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:27:24.015Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:27:24.020Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:27:24.025Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:27:24.029Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc498cbabe0426bf94c929","timestamp":"2025-02-24T10:27:24.039Z"}
{"id":"67bc498cbabe0426bf94c929","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:27:24.046Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc498cbabe0426bf94c92f","timestamp":"2025-02-24T10:27:24.051Z"}
{"id":"67bc498cbabe0426bf94c92f","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:27:24.056Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:27:24.060Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:27:24.063Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:27:24.524Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:27:24.534Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:27:24.542Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:27:24.550Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:27:24.556Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:27:24.562Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:27:24.565Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.331Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:29:20.515Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a000eb0ed62f31e8e87","timestamp":"2025-02-24T10:29:20.517Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:29:20.526Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.532Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:29:20.536Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.544Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.552Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4a000eb0ed62f31e8e8a","timestamp":"2025-02-24T10:29:20.557Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.562Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:29:20.567Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.572Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.578Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:29:20.583Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a000eb0ed62f31e8e87","timestamp":"2025-02-24T10:29:20.584Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.589Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:29:20.593Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a000eb0ed62f31e8e87","timestamp":"2025-02-24T10:29:20.595Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.599Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:29:20.608Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:20.622Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:29:20.625Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:29:21.774Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:29:21.788Z"}
{"level":"info","message":"GET /api/stones/67bc4a018ae6251f2ee0c265","timestamp":"2025-02-24T10:29:21.794Z"}
{"level":"info","message":"GET /api/stones/67bc4a018ae6251f2ee0c26a","timestamp":"2025-02-24T10:29:21.803Z"}
{"id":"67bc4a018ae6251f2ee0c26a","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:29:21.807Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:29:21.815Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4a018ae6251f2ee0c26c","color":"White","createdAt":"2025-02-24T10:29:21.819Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:29:21.819Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:29:21.821Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:29:21.826Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:29:21.828Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:29:21.833Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:29:21.838Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:29:21.842Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:29:21.846Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4a018ae6251f2ee0c270","timestamp":"2025-02-24T10:29:21.856Z"}
{"id":"67bc4a018ae6251f2ee0c270","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:29:21.862Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4a018ae6251f2ee0c276","timestamp":"2025-02-24T10:29:21.866Z"}
{"id":"67bc4a018ae6251f2ee0c276","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:29:21.871Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:29:21.875Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:29:21.878Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:29:22.346Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:29:22.355Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:29:22.363Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:29:22.370Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:29:22.377Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:29:22.383Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:29:22.385Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.620Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:30:15.856Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a37e6be03fc1d6ccd8d","timestamp":"2025-02-24T10:30:15.858Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:30:15.869Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.877Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:30:15.880Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.890Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.899Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4a37e6be03fc1d6ccd90","timestamp":"2025-02-24T10:30:15.904Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.910Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:30:15.914Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.920Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.927Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:30:15.932Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a37e6be03fc1d6ccd8d","timestamp":"2025-02-24T10:30:15.933Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.938Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:30:15.944Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4a37e6be03fc1d6ccd8d","timestamp":"2025-02-24T10:30:15.945Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.950Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:30:15.959Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:15.974Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:30:15.976Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:30:17.071Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:30:17.085Z"}
{"level":"info","message":"GET /api/stones/67bc4a3965e9d79331f8b4c2","timestamp":"2025-02-24T10:30:17.092Z"}
{"level":"info","message":"GET /api/stones/67bc4a3965e9d79331f8b4c7","timestamp":"2025-02-24T10:30:17.100Z"}
{"id":"67bc4a3965e9d79331f8b4c7","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:30:17.105Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:30:17.111Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4a3965e9d79331f8b4c9","color":"White","createdAt":"2025-02-24T10:30:17.115Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:30:17.115Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:30:17.116Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:30:17.121Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:30:17.124Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:30:17.128Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:30:17.133Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:30:17.139Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:30:17.143Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4a3965e9d79331f8b4cd","timestamp":"2025-02-24T10:30:17.152Z"}
{"id":"67bc4a3965e9d79331f8b4cd","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:30:17.158Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4a3965e9d79331f8b4d3","timestamp":"2025-02-24T10:30:17.163Z"}
{"id":"67bc4a3965e9d79331f8b4d3","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:30:17.167Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:30:17.172Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:30:17.174Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:30:17.639Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:30:17.648Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:30:17.656Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:30:17.665Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:30:17.671Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:30:17.677Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:30:17.679Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.030Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:34:18.197Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b29411c53bdd6feee2d","timestamp":"2025-02-24T10:34:18.199Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:34:18.207Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.213Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:34:18.216Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.225Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.232Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4b2a411c53bdd6feee30","timestamp":"2025-02-24T10:34:18.237Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.243Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:34:18.247Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.252Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.259Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:34:18.264Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b29411c53bdd6feee2d","timestamp":"2025-02-24T10:34:18.265Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.269Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:34:18.274Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b29411c53bdd6feee2d","timestamp":"2025-02-24T10:34:18.275Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.280Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:34:18.290Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:18.305Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:34:18.307Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:34:18.983Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:34:19.003Z"}
{"level":"info","message":"GET /api/stones/67bc4b2ad362bd1da48a7f80","timestamp":"2025-02-24T10:34:19.008Z"}
{"level":"info","message":"GET /api/stones/67bc4b2bd362bd1da48a7f85","timestamp":"2025-02-24T10:34:19.017Z"}
{"id":"67bc4b2bd362bd1da48a7f85","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:34:19.021Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:34:19.027Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4b2bd362bd1da48a7f87","color":"White","createdAt":"2025-02-24T10:34:19.031Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:34:19.031Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:34:19.032Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:34:19.036Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:34:19.039Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:34:19.044Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:34:19.048Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:34:19.053Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:34:19.057Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4b2bd362bd1da48a7f8b","timestamp":"2025-02-24T10:34:19.066Z"}
{"id":"67bc4b2bd362bd1da48a7f8b","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:34:19.073Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4b2bd362bd1da48a7f91","timestamp":"2025-02-24T10:34:19.077Z"}
{"id":"67bc4b2bd362bd1da48a7f91","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:34:19.082Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:34:19.086Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:34:19.090Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:34:19.550Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:34:19.559Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:34:19.567Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:34:19.575Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:34:19.581Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:34:19.587Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:34:19.590Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:30.219Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:35:31.429Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b722b99949b8f5f0eee","timestamp":"2025-02-24T10:35:31.432Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.17,"priceUSD":113.57,"timestamp":"2025-02-24T10:35:31.442Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.450Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:35:31.456Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.464Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.473Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4b732b99949b8f5f0ef1","timestamp":"2025-02-24T10:35:31.479Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.484Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:35:31.489Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.495Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.501Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:35:31.507Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b722b99949b8f5f0eee","timestamp":"2025-02-24T10:35:31.508Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.513Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:35:31.518Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4b722b99949b8f5f0eee","timestamp":"2025-02-24T10:35:31.520Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.524Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:35:31.533Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:31.557Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:35:31.561Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:35:32.097Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:35:32.113Z"}
{"level":"info","message":"GET /api/stones/67bc4b745ad0c18228a62fea","timestamp":"2025-02-24T10:35:32.119Z"}
{"level":"info","message":"GET /api/stones/67bc4b745ad0c18228a62fef","timestamp":"2025-02-24T10:35:32.127Z"}
{"id":"67bc4b745ad0c18228a62fef","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:35:32.131Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:35:32.137Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4b745ad0c18228a62ff1","color":"White","createdAt":"2025-02-24T10:35:32.142Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:35:32.142Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:35:32.143Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:35:32.148Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:35:32.151Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:35:32.156Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:35:32.161Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:35:32.165Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:35:32.169Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4b745ad0c18228a62ff5","timestamp":"2025-02-24T10:35:32.178Z"}
{"id":"67bc4b745ad0c18228a62ff5","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:35:32.185Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4b745ad0c18228a62ffb","timestamp":"2025-02-24T10:35:32.189Z"}
{"id":"67bc4b745ad0c18228a62ffb","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:35:32.194Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:35:32.198Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:35:32.201Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:35:33.151Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:35:33.161Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:35:33.170Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:35:33.178Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:35:33.184Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:35:33.190Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:35:33.192Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.263Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:51:54.402Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f4a3f3e20efde7e8c87","timestamp":"2025-02-24T10:51:54.404Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:51:54.409Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.416Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:51:54.419Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.427Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.434Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4f4a3f3e20efde7e8c8a","timestamp":"2025-02-24T10:51:54.440Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.444Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:51:54.449Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.454Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.461Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:51:54.467Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f4a3f3e20efde7e8c87","timestamp":"2025-02-24T10:51:54.468Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.472Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:51:54.478Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f4a3f3e20efde7e8c87","timestamp":"2025-02-24T10:51:54.479Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.484Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:51:54.493Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:54.508Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:51:54.511Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:51:55.130Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:51:55.151Z"}
{"level":"info","message":"GET /api/stones/67bc4f4bd4cd45d7c24722cd","timestamp":"2025-02-24T10:51:55.157Z"}
{"level":"info","message":"GET /api/stones/67bc4f4bd4cd45d7c24722d2","timestamp":"2025-02-24T10:51:55.167Z"}
{"id":"67bc4f4bd4cd45d7c24722d2","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:51:55.172Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:51:55.178Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4f4bd4cd45d7c24722d4","color":"White","createdAt":"2025-02-24T10:51:55.182Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:51:55.182Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:51:55.183Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:51:55.188Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:51:55.191Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:51:55.197Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:51:55.201Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:51:55.206Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:51:55.210Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f4bd4cd45d7c24722d8","timestamp":"2025-02-24T10:51:55.226Z"}
{"id":"67bc4f4bd4cd45d7c24722d8","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:51:55.244Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f4bd4cd45d7c24722de","timestamp":"2025-02-24T10:51:55.249Z"}
{"id":"67bc4f4bd4cd45d7c24722de","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:51:55.254Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:51:55.259Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:51:55.263Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:51:56.243Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:51:56.253Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:51:56.262Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:51:56.270Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:51:56.277Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:51:56.284Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:51:56.286Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.145Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:52:15.268Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f5f34ebab791b50e671","timestamp":"2025-02-24T10:52:15.269Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:52:15.274Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.280Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:52:15.283Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.290Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.296Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4f5f34ebab791b50e674","timestamp":"2025-02-24T10:52:15.301Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.306Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:52:15.310Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.315Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.321Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:52:15.327Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f5f34ebab791b50e671","timestamp":"2025-02-24T10:52:15.328Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.333Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:52:15.341Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f5f34ebab791b50e671","timestamp":"2025-02-24T10:52:15.343Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.348Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:52:15.358Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:15.374Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:52:15.376Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:52:15.903Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:52:15.920Z"}
{"level":"info","message":"GET /api/stones/67bc4f5f27d588cd1c26e152","timestamp":"2025-02-24T10:52:15.926Z"}
{"level":"info","message":"GET /api/stones/67bc4f5f27d588cd1c26e157","timestamp":"2025-02-24T10:52:15.934Z"}
{"id":"67bc4f5f27d588cd1c26e157","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:52:15.938Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:15.944Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4f5f27d588cd1c26e159","color":"White","createdAt":"2025-02-24T10:52:15.948Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:52:15.948Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:52:15.949Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:15.954Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:52:15.956Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:52:15.961Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:52:15.966Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:52:15.970Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:52:15.974Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f5f27d588cd1c26e15d","timestamp":"2025-02-24T10:52:15.984Z"}
{"id":"67bc4f5f27d588cd1c26e15d","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:52:15.990Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f5f27d588cd1c26e163","timestamp":"2025-02-24T10:52:15.994Z"}
{"id":"67bc4f5f27d588cd1c26e163","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:52:15.998Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:52:16.003Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:52:16.006Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:52:16.953Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:52:16.963Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:52:16.971Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:52:16.979Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:16.985Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:16.992Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:52:16.994Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:40.842Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:52:40.955Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f78fa40e9446dab611d","timestamp":"2025-02-24T10:52:40.956Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:52:40.961Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:40.967Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:52:40.969Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:40.976Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:40.983Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4f78fa40e9446dab6120","timestamp":"2025-02-24T10:52:40.988Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:40.993Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:52:40.997Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:41.002Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:41.010Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:52:41.016Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f78fa40e9446dab611d","timestamp":"2025-02-24T10:52:41.017Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:41.021Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:52:41.026Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4f78fa40e9446dab611d","timestamp":"2025-02-24T10:52:41.027Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:41.032Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:52:41.041Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:41.057Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:52:41.060Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:52:41.633Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:52:41.650Z"}
{"level":"info","message":"GET /api/stones/67bc4f797735046e90b29e15","timestamp":"2025-02-24T10:52:41.656Z"}
{"level":"info","message":"GET /api/stones/67bc4f797735046e90b29e1a","timestamp":"2025-02-24T10:52:41.665Z"}
{"id":"67bc4f797735046e90b29e1a","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:52:41.669Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:41.676Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4f797735046e90b29e1c","color":"White","createdAt":"2025-02-24T10:52:41.680Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:52:41.680Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:52:41.681Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:41.686Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:52:41.688Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:52:41.693Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:52:41.697Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:52:41.702Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:52:41.706Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f797735046e90b29e20","timestamp":"2025-02-24T10:52:41.717Z"}
{"id":"67bc4f797735046e90b29e20","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:52:41.724Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4f797735046e90b29e26","timestamp":"2025-02-24T10:52:41.728Z"}
{"id":"67bc4f797735046e90b29e26","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:52:41.732Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:52:41.737Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:52:41.740Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:52:42.212Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:52:42.222Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:52:42.231Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:52:42.239Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:52:42.246Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:52:42.252Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:52:42.255Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:29.877Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T10:53:30.029Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4fa9f41624ffbd7cb191","timestamp":"2025-02-24T10:53:30.031Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T10:53:30.038Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.044Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T10:53:30.047Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.055Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.063Z"}
{"level":"warn","message":"Stone not found with ID: 67bc4faaf41624ffbd7cb194","timestamp":"2025-02-24T10:53:30.067Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.072Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T10:53:30.077Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.082Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.088Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:53:30.094Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4fa9f41624ffbd7cb191","timestamp":"2025-02-24T10:53:30.095Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.101Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T10:53:30.108Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc4fa9f41624ffbd7cb191","timestamp":"2025-02-24T10:53:30.109Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.115Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:154:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T10:53:30.125Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:30.140Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T10:53:30.143Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T10:53:30.720Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T10:53:30.736Z"}
{"level":"info","message":"GET /api/stones/67bc4faa1f427624e63866e3","timestamp":"2025-02-24T10:53:30.742Z"}
{"level":"info","message":"GET /api/stones/67bc4faa1f427624e63866e8","timestamp":"2025-02-24T10:53:30.754Z"}
{"id":"67bc4faa1f427624e63866e8","level":"warn","message":"Stone not found","timestamp":"2025-02-24T10:53:30.758Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:53:30.765Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc4faa1f427624e63866ea","color":"White","createdAt":"2025-02-24T10:53:30.769Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T10:53:30.769Z","usage":["bathroom"]},"timestamp":"2025-02-24T10:53:30.770Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:53:30.775Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:53:30.777Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T10:53:30.783Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T10:53:30.788Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T10:53:30.793Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T10:53:30.797Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4faa1f427624e63866ee","timestamp":"2025-02-24T10:53:30.806Z"}
{"id":"67bc4faa1f427624e63866ee","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T10:53:30.813Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc4faa1f427624e63866f4","timestamp":"2025-02-24T10:53:30.816Z"}
{"id":"67bc4faa1f427624e63866f4","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T10:53:30.821Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:53:30.825Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T10:53:30.828Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T10:53:31.295Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T10:53:31.306Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T10:53:31.314Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T10:53:31.322Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T10:53:31.329Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T10:53:31.336Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T10:53:31.338Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:02:30.708Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T11:02:30.712Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:02:31.242Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:02:31.258Z"}
{"level":"info","message":"GET /api/stones/67bc51c722bc1e829d49813d","timestamp":"2025-02-24T11:02:31.263Z"}
{"level":"info","message":"GET /api/stones/67bc51c722bc1e829d498142","timestamp":"2025-02-24T11:02:31.272Z"}
{"id":"67bc51c722bc1e829d498142","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:02:31.276Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:02:31.282Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc51c722bc1e829d498144","color":"White","createdAt":"2025-02-24T11:02:31.286Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:02:31.286Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:02:31.287Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:02:31.292Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:02:31.294Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:02:31.299Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:02:31.303Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:02:31.308Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:02:31.312Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc51c722bc1e829d498148","timestamp":"2025-02-24T11:02:31.321Z"}
{"id":"67bc51c722bc1e829d498148","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:02:31.328Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc51c722bc1e829d49814e","timestamp":"2025-02-24T11:02:31.333Z"}
{"id":"67bc51c722bc1e829d49814e","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:02:31.338Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:02:31.342Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:02:31.345Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:02:31.835Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:02:31.893Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:02:31.912Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:02:31.919Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:02:31.926Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:02:31.932Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:02:31.935Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:32:10.247Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T11:32:10.251Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:32:10.749Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:32:10.770Z"}
{"level":"info","message":"GET /api/stones/67bc58ba6c8ef2c7ca414439","timestamp":"2025-02-24T11:32:10.776Z"}
{"level":"info","message":"GET /api/stones/67bc58ba6c8ef2c7ca41443e","timestamp":"2025-02-24T11:32:10.784Z"}
{"id":"67bc58ba6c8ef2c7ca41443e","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:32:10.788Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:32:10.794Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc58ba6c8ef2c7ca414440","color":"White","createdAt":"2025-02-24T11:32:10.798Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:32:10.798Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:32:10.800Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:32:10.805Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:32:10.807Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:32:10.812Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:32:10.818Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:32:10.822Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:32:10.826Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc58ba6c8ef2c7ca414444","timestamp":"2025-02-24T11:32:10.835Z"}
{"id":"67bc58ba6c8ef2c7ca414444","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:32:10.843Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc58ba6c8ef2c7ca41444a","timestamp":"2025-02-24T11:32:10.847Z"}
{"id":"67bc58ba6c8ef2c7ca41444a","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:32:10.851Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:32:10.855Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:32:10.859Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:32:11.808Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:32:11.816Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:32:11.824Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:32:11.833Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:32:11.838Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:32:11.845Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:32:11.847Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.120Z"}
{"level":"info","message":"Exchange rates retrieved from API","timestamp":"2025-02-24T11:33:30.240Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc590aa3d05f749e55b31c","timestamp":"2025-02-24T11:33:30.241Z"}
{"areaM2":1.08,"level":"info","message":"Response body:","priceEUR":108,"pricePLN":449.21,"priceUSD":112.99,"timestamp":"2025-02-24T11:33:30.246Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.252Z"}
{"level":"warn","message":"Missing required fields in price calculation request.","timestamp":"2025-02-24T11:33:30.255Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.262Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.269Z"}
{"level":"warn","message":"Stone not found with ID: 67bc590aa3d05f749e55b31f","timestamp":"2025-02-24T11:33:30.273Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.278Z"}
{"level":"warn","message":"Invalid unit provided: feet","timestamp":"2025-02-24T11:33:30.283Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.288Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.295Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T11:33:30.299Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc590aa3d05f749e55b31c","timestamp":"2025-02-24T11:33:30.300Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.305Z"}
{"level":"info","message":"Exchange rates retrieved from cache","timestamp":"2025-02-24T11:33:30.310Z"}
{"level":"info","message":"Price calculation successful for stone ID: 67bc590aa3d05f749e55b31c","timestamp":"2025-02-24T11:33:30.311Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.316Z"}
{"level":"error","message":"Error in price calculation: Database failure","stack":"Error: Database failure\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/tests/pricing.test.js:160:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:397:39\n    at Function.<anonymous> (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:404:13)\n    at Function.mockConstructor [as findById] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/jest-mock/build/index.js:148:19)\n    at findById (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:78:31)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-24T11:33:30.326Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:30.347Z"}
{"level":"warn","message":"Invalid thickness value received: 5cm","timestamp":"2025-02-24T11:33:30.350Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:33:30.878Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:33:30.898Z"}
{"level":"info","message":"GET /api/stones/67bc590adf273b5362b7dc6b","timestamp":"2025-02-24T11:33:30.904Z"}
{"level":"info","message":"GET /api/stones/67bc590adf273b5362b7dc70","timestamp":"2025-02-24T11:33:30.912Z"}
{"id":"67bc590adf273b5362b7dc70","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:33:30.916Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:33:30.923Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc590adf273b5362b7dc72","color":"White","createdAt":"2025-02-24T11:33:30.927Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:33:30.927Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:33:30.929Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:33:30.933Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:33:30.936Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:33:30.941Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:33:30.946Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:33:30.950Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:33:30.954Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc590adf273b5362b7dc76","timestamp":"2025-02-24T11:33:30.964Z"}
{"id":"67bc590adf273b5362b7dc76","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:33:30.970Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc590adf273b5362b7dc7c","timestamp":"2025-02-24T11:33:30.975Z"}
{"id":"67bc590adf273b5362b7dc7c","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:33:30.979Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:33:30.983Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:33:30.986Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:33:31.904Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:33:31.914Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:33:31.922Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:33:31.963Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:33:31.978Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:33:31.985Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:33:31.987Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:35:19.098Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:35:19.194Z"}
{"level":"info","message":"GET /api/stones/67bc5976650453dc3c43cccb","timestamp":"2025-02-24T11:35:19.199Z"}
{"level":"info","message":"GET /api/stones/67bc5977650453dc3c43ccd0","timestamp":"2025-02-24T11:35:19.207Z"}
{"id":"67bc5977650453dc3c43ccd0","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:35:19.211Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:35:19.217Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5977650453dc3c43ccd2","color":"White","createdAt":"2025-02-24T11:35:19.222Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:35:19.222Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:35:19.223Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:35:19.228Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:35:19.230Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:35:19.235Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:35:19.240Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:35:19.245Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:35:19.249Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5977650453dc3c43ccd6","timestamp":"2025-02-24T11:35:19.258Z"}
{"id":"67bc5977650453dc3c43ccd6","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:35:19.270Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5977650453dc3c43ccdc","timestamp":"2025-02-24T11:35:19.274Z"}
{"id":"67bc5977650453dc3c43ccdc","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:35:19.279Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:35:19.283Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:35:19.286Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:35:19.994Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:35:20.004Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:35:20.012Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:35:20.019Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:35:20.026Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:35:20.033Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:35:20.035Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:37:55.216Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:37:55.234Z"}
{"level":"info","message":"GET /api/stones/67bc5a136ffeb32728fbbeb2","timestamp":"2025-02-24T11:37:55.239Z"}
{"level":"info","message":"GET /api/stones/67bc5a136ffeb32728fbbeb7","timestamp":"2025-02-24T11:37:55.247Z"}
{"id":"67bc5a136ffeb32728fbbeb7","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:37:55.251Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:37:55.258Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5a136ffeb32728fbbeb9","color":"White","createdAt":"2025-02-24T11:37:55.261Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:37:55.261Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:37:55.263Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:37:55.267Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:37:55.270Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:37:55.275Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:37:55.280Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:37:55.284Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:37:55.288Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5a136ffeb32728fbbebd","timestamp":"2025-02-24T11:37:55.298Z"}
{"id":"67bc5a136ffeb32728fbbebd","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:37:55.305Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5a136ffeb32728fbbec3","timestamp":"2025-02-24T11:37:55.309Z"}
{"id":"67bc5a136ffeb32728fbbec3","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:37:55.314Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:37:55.318Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:37:55.321Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:37:55.821Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:37:55.831Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:37:55.839Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:37:55.846Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:37:55.853Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:37:55.859Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:37:55.862Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:39:40.456Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:39:40.473Z"}
{"level":"info","message":"GET /api/stones/67bc5a7cdd196fcbb4f23449","timestamp":"2025-02-24T11:39:40.478Z"}
{"level":"info","message":"GET /api/stones/67bc5a7cdd196fcbb4f2344e","timestamp":"2025-02-24T11:39:40.486Z"}
{"id":"67bc5a7cdd196fcbb4f2344e","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:39:40.491Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:39:40.497Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5a7cdd196fcbb4f23450","color":"White","createdAt":"2025-02-24T11:39:40.501Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:39:40.501Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:39:40.502Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:39:40.507Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:39:40.509Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:39:40.515Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:39:40.519Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:39:40.524Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:39:40.528Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5a7cdd196fcbb4f23454","timestamp":"2025-02-24T11:39:40.537Z"}
{"id":"67bc5a7cdd196fcbb4f23454","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:39:40.544Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5a7cdd196fcbb4f2345a","timestamp":"2025-02-24T11:39:40.548Z"}
{"id":"67bc5a7cdd196fcbb4f2345a","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:39:40.552Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:39:40.557Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:39:40.560Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:39:41.559Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:39:41.568Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:39:41.576Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:39:41.584Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:39:41.590Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:39:41.597Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:39:41.599Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:43:51.275Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:43:51.291Z"}
{"level":"info","message":"GET /api/stones/67bc5b774add64f29a7809c6","timestamp":"2025-02-24T11:43:51.297Z"}
{"level":"info","message":"GET /api/stones/67bc5b774add64f29a7809cb","timestamp":"2025-02-24T11:43:51.305Z"}
{"id":"67bc5b774add64f29a7809cb","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:43:51.309Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:43:51.316Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5b774add64f29a7809cd","color":"White","createdAt":"2025-02-24T11:43:51.320Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:43:51.320Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:43:51.321Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:43:51.327Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:43:51.329Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:43:51.334Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:43:51.339Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:43:51.344Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:43:51.348Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5b774add64f29a7809d1","timestamp":"2025-02-24T11:43:51.357Z"}
{"id":"67bc5b774add64f29a7809d1","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:43:51.364Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5b774add64f29a7809d7","timestamp":"2025-02-24T11:43:51.368Z"}
{"id":"67bc5b774add64f29a7809d7","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:43:51.372Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:43:51.377Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:43:51.380Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:43:51.886Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:43:51.895Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:43:51.903Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:43:51.912Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:43:51.918Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:43:51.924Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:43:51.927Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:44:43.181Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:44:43.197Z"}
{"level":"info","message":"GET /api/stones/67bc5bab2b7594eaf90ab991","timestamp":"2025-02-24T11:44:43.204Z"}
{"level":"info","message":"GET /api/stones/67bc5bab2b7594eaf90ab996","timestamp":"2025-02-24T11:44:43.212Z"}
{"id":"67bc5bab2b7594eaf90ab996","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:44:43.215Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:44:43.222Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5bab2b7594eaf90ab998","color":"White","createdAt":"2025-02-24T11:44:43.226Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:44:43.226Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:44:43.227Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:44:43.232Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:44:43.234Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:44:43.239Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:44:43.244Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:44:43.248Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:44:43.252Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5bab2b7594eaf90ab99c","timestamp":"2025-02-24T11:44:43.262Z"}
{"id":"67bc5bab2b7594eaf90ab99c","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:44:43.278Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5bab2b7594eaf90ab9a2","timestamp":"2025-02-24T11:44:43.283Z"}
{"id":"67bc5bab2b7594eaf90ab9a2","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:44:43.287Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:44:43.291Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:44:43.294Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:44:44.247Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:44:44.257Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:44:44.264Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:44:44.273Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:44:44.280Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:44:44.285Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:44:44.288Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:46:01.587Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:46:01.608Z"}
{"level":"info","message":"GET /api/stones/67bc5bf946fead0dd7fe99a9","timestamp":"2025-02-24T11:46:01.614Z"}
{"level":"info","message":"GET /api/stones/67bc5bf946fead0dd7fe99ae","timestamp":"2025-02-24T11:46:01.622Z"}
{"id":"67bc5bf946fead0dd7fe99ae","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:46:01.626Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:46:01.632Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5bf946fead0dd7fe99b0","color":"White","createdAt":"2025-02-24T11:46:01.636Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:46:01.636Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:46:01.637Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:46:01.642Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:46:01.644Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:46:01.650Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:46:01.654Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:46:01.659Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:46:01.663Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5bf946fead0dd7fe99b4","timestamp":"2025-02-24T11:46:01.673Z"}
{"id":"67bc5bf946fead0dd7fe99b4","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:46:01.680Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5bf946fead0dd7fe99ba","timestamp":"2025-02-24T11:46:01.684Z"}
{"id":"67bc5bf946fead0dd7fe99ba","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:46:01.688Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:46:01.693Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:46:01.695Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:46:02.232Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:46:02.243Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:46:02.251Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:46:02.260Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:46:02.266Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:46:02.272Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:46:02.275Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:47:55.368Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:47:55.393Z"}
{"level":"info","message":"GET /api/stones/67bc5c6ba7f3a9d288753688","timestamp":"2025-02-24T11:47:55.398Z"}
{"level":"info","message":"GET /api/stones/67bc5c6ba7f3a9d28875368d","timestamp":"2025-02-24T11:47:55.407Z"}
{"id":"67bc5c6ba7f3a9d28875368d","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:47:55.411Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:47:55.417Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5c6ba7f3a9d28875368f","color":"White","createdAt":"2025-02-24T11:47:55.422Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:47:55.422Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:47:55.423Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:47:55.428Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:47:55.430Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:47:55.436Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:47:55.441Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:47:55.446Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:47:55.450Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5c6ba7f3a9d288753693","timestamp":"2025-02-24T11:47:55.459Z"}
{"id":"67bc5c6ba7f3a9d288753693","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:47:55.466Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5c6ba7f3a9d288753699","timestamp":"2025-02-24T11:47:55.471Z"}
{"id":"67bc5c6ba7f3a9d288753699","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:47:55.475Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:47:55.480Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:47:55.482Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:47:55.982Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:47:55.993Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:47:56.002Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:47:56.010Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:47:56.016Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:47:56.023Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:47:56.025Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:49:41.065Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:49:41.086Z"}
{"level":"info","message":"GET /api/stones/67bc5cd545307a27b5e12bff","timestamp":"2025-02-24T11:49:41.092Z"}
{"level":"info","message":"GET /api/stones/67bc5cd545307a27b5e12c04","timestamp":"2025-02-24T11:49:41.101Z"}
{"id":"67bc5cd545307a27b5e12c04","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:49:41.106Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:49:41.112Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5cd545307a27b5e12c06","color":"White","createdAt":"2025-02-24T11:49:41.116Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:49:41.116Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:49:41.118Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:49:41.122Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:49:41.125Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:49:41.131Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:49:41.135Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:49:41.141Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:49:41.145Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5cd545307a27b5e12c0a","timestamp":"2025-02-24T11:49:41.154Z"}
{"id":"67bc5cd545307a27b5e12c0a","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:49:41.162Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5cd545307a27b5e12c10","timestamp":"2025-02-24T11:49:41.166Z"}
{"id":"67bc5cd545307a27b5e12c10","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:49:41.171Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:49:41.176Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:49:41.179Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:49:41.653Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:49:41.664Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:49:41.672Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:49:41.680Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:49:41.686Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:49:41.692Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:49:41.695Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:51:58.590Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:51:58.610Z"}
{"level":"info","message":"GET /api/stones/67bc5d5e14da8174ba5ab570","timestamp":"2025-02-24T11:51:58.615Z"}
{"level":"info","message":"GET /api/stones/67bc5d5e14da8174ba5ab575","timestamp":"2025-02-24T11:51:58.623Z"}
{"id":"67bc5d5e14da8174ba5ab575","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:51:58.627Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:51:58.634Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5d5e14da8174ba5ab577","color":"White","createdAt":"2025-02-24T11:51:58.638Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:51:58.638Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:51:58.640Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:51:58.646Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:51:58.649Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:51:58.656Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:51:58.662Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:51:58.668Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:51:58.676Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5d5e14da8174ba5ab57b","timestamp":"2025-02-24T11:51:58.690Z"}
{"id":"67bc5d5e14da8174ba5ab57b","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:51:58.708Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5d5e14da8174ba5ab581","timestamp":"2025-02-24T11:51:58.715Z"}
{"id":"67bc5d5e14da8174ba5ab581","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:51:58.799Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:51:58.817Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:51:58.821Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:52:00.502Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:52:00.512Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:52:00.520Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:52:00.529Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:52:00.536Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:52:00.543Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:52:00.545Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:55:08.223Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:55:08.243Z"}
{"level":"info","message":"GET /api/stones/67bc5e1c8fdce9082b45ac19","timestamp":"2025-02-24T11:55:08.248Z"}
{"level":"info","message":"GET /api/stones/67bc5e1c8fdce9082b45ac1e","timestamp":"2025-02-24T11:55:08.257Z"}
{"id":"67bc5e1c8fdce9082b45ac1e","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:55:08.261Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:55:08.267Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5e1c8fdce9082b45ac20","color":"White","createdAt":"2025-02-24T11:55:08.272Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:55:08.272Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:55:08.273Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:55:08.278Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:55:08.280Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:55:08.286Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:55:08.290Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:55:08.295Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:55:08.299Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e1c8fdce9082b45ac24","timestamp":"2025-02-24T11:55:08.307Z"}
{"id":"67bc5e1c8fdce9082b45ac24","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:55:08.315Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e1c8fdce9082b45ac2a","timestamp":"2025-02-24T11:55:08.318Z"}
{"id":"67bc5e1c8fdce9082b45ac2a","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:55:08.323Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:55:08.327Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:55:08.330Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:55:08.854Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:55:08.864Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:55:08.873Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:55:08.880Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:55:08.887Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:55:08.893Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:55:08.895Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:56:06.290Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:56:06.314Z"}
{"level":"info","message":"GET /api/stones/67bc5e56cfd77922f23ef225","timestamp":"2025-02-24T11:56:06.319Z"}
{"level":"info","message":"GET /api/stones/67bc5e56cfd77922f23ef22a","timestamp":"2025-02-24T11:56:06.327Z"}
{"id":"67bc5e56cfd77922f23ef22a","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:56:06.332Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:06.338Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5e56cfd77922f23ef22c","color":"White","createdAt":"2025-02-24T11:56:06.343Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:56:06.343Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:56:06.344Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:06.349Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:56:06.352Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:56:06.357Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:56:06.362Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:56:06.366Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:56:06.370Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e56cfd77922f23ef230","timestamp":"2025-02-24T11:56:06.379Z"}
{"id":"67bc5e56cfd77922f23ef230","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:56:06.386Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e56cfd77922f23ef236","timestamp":"2025-02-24T11:56:06.390Z"}
{"id":"67bc5e56cfd77922f23ef236","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:56:06.394Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:56:06.398Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:56:06.401Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:56:06.900Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:56:06.911Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:56:06.920Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:56:06.929Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:56:06.935Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:06.942Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:56:06.945Z"}
{"level":"info","message":"GET /api/stones?type=quartzite&priceMin=100&priceMax=300&page=1&limit=5","timestamp":"2025-02-24T11:56:33.669Z"}
{"level":"info","message":"Fetched stones list","query":{"limit":"5","page":"1","priceMax":"300","priceMin":"100","type":"quartzite"},"timestamp":"2025-02-24T11:56:33.687Z"}
{"level":"info","message":"GET /api/stones/67bc5e718f376368b0d81fa9","timestamp":"2025-02-24T11:56:33.692Z"}
{"level":"info","message":"GET /api/stones/67bc5e718f376368b0d81fae","timestamp":"2025-02-24T11:56:33.701Z"}
{"id":"67bc5e718f376368b0d81fae","level":"warn","message":"Stone not found","timestamp":"2025-02-24T11:56:33.705Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:33.711Z"}
{"level":"info","message":"New stone created","stone":{"__v":0,"_id":"67bc5e718f376368b0d81fb0","color":"White","createdAt":"2025-02-24T11:56:33.716Z","location":"Showroom Table B","name":"Carrara","pricePerM2_2cm":200,"pricePerM2_3cm":250,"type":"marble","updatedAt":"2025-02-24T11:56:33.716Z","usage":["bathroom"]},"timestamp":"2025-02-24T11:56:33.717Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:33.723Z"}
{"body":{"color":"Gray","name":"No Type Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:56:33.725Z"}
{"level":"info","message":"GET /api/stones/search?query=Taj%20Mahal","timestamp":"2025-02-24T11:56:33.731Z"}
{"level":"info","message":"Stone search successful","query":{"query":"Taj Mahal"},"results":1,"timestamp":"2025-02-24T11:56:33.735Z"}
{"level":"info","message":"GET /api/stones/search?query=NonExistentStone","timestamp":"2025-02-24T11:56:33.740Z"}
{"level":"warn","message":"No stones found for search query","query":{"query":"NonExistentStone"},"timestamp":"2025-02-24T11:56:33.744Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e718f376368b0d81fb4","timestamp":"2025-02-24T11:56:33.753Z"}
{"id":"67bc5e718f376368b0d81fb4","level":"info","message":"Recommended stones retrieved","recommendations":1,"timestamp":"2025-02-24T11:56:33.759Z"}
{"level":"info","message":"GET /api/stones/recommendations/67bc5e718f376368b0d81fba","timestamp":"2025-02-24T11:56:33.763Z"}
{"id":"67bc5e718f376368b0d81fba","level":"warn","message":"Stone not found for recommendations","timestamp":"2025-02-24T11:56:33.767Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:56:33.771Z"}
{"error":{},"level":"error","message":"Error fetching stones","timestamp":"2025-02-24T11:56:33.774Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:56:34.272Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:56:34.282Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:56:34.290Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:56:34.298Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:56:34.303Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:56:34.310Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:56:34.312Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T11:59:31.926Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T11:59:31.938Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T11:59:31.947Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T11:59:31.966Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T11:59:31.975Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T11:59:31.983Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T11:59:31.985Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:00:38.968Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:00:38.980Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:00:38.989Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:00:39.006Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:00:39.014Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:00:39.021Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:00:39.024Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:04:18.041Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:04:18.052Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:04:18.060Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:04:18.077Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:04:18.083Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:04:18.090Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:04:18.093Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:04:47.217Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:04:47.245Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:04:47.256Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:04:47.264Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:04:47.270Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:04:47.277Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:04:47.280Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:13:40.252Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:13:40.268Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:13:40.284Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:13:40.297Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:13:40.306Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:13:40.316Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:13:40.320Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:15:26.460Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:15:26.472Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:15:26.480Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:15:26.488Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:15:26.494Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:15:26.500Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:15:26.503Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:16:01.342Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:16:01.353Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:16:01.362Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:16:01.369Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:16:01.376Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:16:01.382Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:16:01.384Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:20:35.953Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:20:35.964Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:20:35.972Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:20:35.980Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:20:35.986Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:20:35.993Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:20:35.995Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:26:31.351Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:26:31.362Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:26:31.370Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:26:31.378Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:26:31.391Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:26:31.398Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:26:31.400Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:28:40.019Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:28:40.030Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:28:40.038Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:28:40.045Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:28:40.051Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:28:40.058Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:28:40.061Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:30:17.031Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:30:17.042Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:30:17.051Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:30:17.059Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:30:17.065Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:30:17.071Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:30:17.074Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-24T12:30:29.092Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-24T12:30:29.103Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-24T12:30:29.111Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-24T12:30:29.120Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-24T12:30:29.127Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-24T12:30:29.133Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-24T12:30:29.136Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T13:25:23.451Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T13:25:23.465Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T13:25:23.483Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T13:25:23.506Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T13:25:23.521Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T13:25:23.543Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T13:25:23.550Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:09:39.071Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:09:39.101Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:09:39.117Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:09:39.137Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:09:39.148Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:26:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:09:39.163Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:09:39.178Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:09:39.185Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:11:39.757Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:11:39.784Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:11:39.801Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:11:39.814Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:11:39.820Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:26:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:11:39.838Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:11:39.855Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:11:39.863Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:18:15.722Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:18:15.746Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:18:15.766Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:18:15.814Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:18:15.830Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:26:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:18:15.854Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:18:15.872Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:18:15.880Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:20:18.178Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:20:18.198Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:20:18.216Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:20:18.241Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:20:18.249Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:27:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:20:18.258Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:20:18.271Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:20:18.277Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:21:29.207Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:21:29.233Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:21:29.258Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:21:29.279Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:21:29.295Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:21:29.314Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:21:29.332Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:21:29.338Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:31:05.735Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:31:05.758Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:31:05.778Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:31:05.790Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:31:05.802Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:31:05.819Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:31:05.838Z"}
{"level":"warn","message":"Missing required fields","stoneData":{"name":"Test Stone"},"timestamp":"2025-02-26T14:31:05.844Z"}
{"error":{},"level":"error","message":"Error creating stone","timestamp":"2025-02-26T14:31:05.849Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:33:56.582Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:33:56.596Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:33:56.605Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:33:56.617Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:33:56.624Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:33:56.640Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:33:56.648Z"}
{"level":"warn","message":"Missing required fields","stoneData":{"name":"Test Stone"},"timestamp":"2025-02-26T14:33:56.651Z"}
{"error":{"status":400},"level":"error","message":"Database failure while creating stone","timestamp":"2025-02-26T14:33:56.656Z"}
{"error":{"status":500},"level":"error","message":"Error creating stone","timestamp":"2025-02-26T14:33:56.662Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:38:07.036Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:38:07.054Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:38:07.066Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:38:07.083Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:38:07.093Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:38:07.106Z"}
{"error":{"_message":"Stone validation failed","errors":{"color":{"kind":"required","message":"Path `color` is required.","name":"ValidatorError","path":"color","properties":{"message":"Path `color` is required.","path":"color","type":"required"}},"location":{"kind":"required","message":"Path `location` is required.","name":"ValidatorError","path":"location","properties":{"message":"Path `location` is required.","path":"location","type":"required"}},"pricePerM2_2cm":{"kind":"required","message":"Path `pricePerM2_2cm` is required.","name":"ValidatorError","path":"pricePerM2_2cm","properties":{"message":"Path `pricePerM2_2cm` is required.","path":"pricePerM2_2cm","type":"required"}},"pricePerM2_3cm":{"kind":"required","message":"Path `pricePerM2_3cm` is required.","name":"ValidatorError","path":"pricePerM2_3cm","properties":{"message":"Path `pricePerM2_3cm` is required.","path":"pricePerM2_3cm","type":"required"}},"type":{"kind":"required","message":"Path `type` is required.","name":"ValidatorError","path":"type","properties":{"message":"Path `type` is required.","path":"type","type":"required"}}},"message":"Stone validation failed: location: Path `location` is required., pricePerM2_3cm: Path `pricePerM2_3cm` is required., pricePerM2_2cm: Path `pricePerM2_2cm` is required., color: Path `color` is required., type: Path `type` is required.","name":"ValidationError"},"level":"error","message":"Error creating stone","timestamp":"2025-02-26T14:38:07.112Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:53:01.456Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:53:01.467Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:53:01.476Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:53:01.484Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:53:01.490Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:53:01.498Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:53:01.505Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:53:01.508Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:54:58.760Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:54:58.770Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:54:58.779Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:54:58.786Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:54:58.793Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:54:58.801Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:54:58.806Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:54:58.809Z"}
{"level":"info","message":"GET /","timestamp":"2025-02-26T14:55:24.330Z"}
{"level":"info","message":"GET /api/nonexistent","timestamp":"2025-02-26T14:55:24.341Z"}
{"level":"info","message":"GET /api/stones","timestamp":"2025-02-26T14:55:24.351Z"}
{"level":"info","message":"Fetched stones list","query":{},"timestamp":"2025-02-26T14:55:24.358Z"}
{"level":"info","message":"POST /api/pricing","timestamp":"2025-02-26T14:55:24.365Z"}
{"level":"error","message":"Error in price calculation: Invalid stone ID format.","stack":"Error: Invalid stone ID format.\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/utils/validation.js:28:11)\n    at validatePriceCalculation (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/services/pricingService.js:8:3)\n    at calculatePrice (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/controllers/pricingController.js:6:29)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:47:12)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/src/server.js:20:3)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at logger (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/morgan/index.js:144:5)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:527:6)\n    at xXssProtectionMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:307:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPoweredByMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:300:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:293:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xFrameOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:277:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDownloadOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:257:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xDnsPrefetchControlMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:250:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at xContentTypeOptionsMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:242:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at strictTransportSecurityMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:235:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at referrerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:203:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at originAgentClusterMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:178:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginResourcePolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:171:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at crossOriginOpenerPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:155:3)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at contentSecurityPolicyMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:120:4)\n    at internalNext (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:525:6)\n    at helmetMiddleware (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/helmet/index.cjs:529:6)\n    at Layer.handle [as handle_request] (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:328:13)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/express/lib/router/index.js:280:10)\n    at /Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/body-parser/lib/read.js:137:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:238:16)\n    at done (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/Users/lukaszkulpaczynski/Desktop/praca/stone-guide-app/stone-guide-app/backend/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:518:28)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-02-26T14:55:24.375Z"}
{"level":"info","message":"POST /api/stones","timestamp":"2025-02-26T14:55:24.382Z"}
{"body":{"name":"Test Stone"},"level":"warn","message":"Missing required fields","timestamp":"2025-02-26T14:55:24.385Z"}
